<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>$asdfasdfa - Unified Ecosystem | GASdf + HolDex + E-Score</title>
  <meta name="description" content="Pay gas with any token. Verify token conviction. Earn engagement rewards. All burns feed the eternal flywheel.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”¥</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      /* Golden Ratio System */
      --phi: 1.618033988749;
      --phi-inv: 0.618033988749;
      --phi-sq: 2.618033988749;
      --phi-inv-sq: 0.381966011250;

      /* Fibonacci Spacing (8, 13, 21, 34, 55, 89, 144) */
      --space-xs: 8px;
      --space-sm: 13px;
      --space-md: 21px;
      --space-lg: 34px;
      --space-xl: 55px;
      --space-2xl: 89px;
      --space-3xl: 144px;

      /* Typography Scale (Fibonacci-based) */
      --text-xs: 13px;
      --text-sm: 15px;
      --text-md: 17px;
      --text-lg: 22px;
      --text-xl: 32px;
      --text-2xl: 44px;
      --text-3xl: 60px;

      /* Color Palette */
      --white: #ffffff;
      --white-90: rgba(255,255,255,0.90);
      --white-70: rgba(255,255,255,0.70);
      --white-50: rgba(255,255,255,0.50);
      --white-30: rgba(255,255,255,0.30);
      --white-10: rgba(255,255,255,0.10);
      --white-05: rgba(255,255,255,0.05);

      /* Brand Colors */
      --gold: #c9a227;
      --gold-soft: rgba(201,162,39,0.12);
      --flame: #ff6b35;
      --flame-soft: rgba(255,107,53,0.15);

      /* Tier Colors */
      --diamond: #b9f2ff;
      --platinum: #e5e4e2;
      --gold-tier: #ffd700;
      --silver: #c0c0c0;
      --bronze: #cd7f32;
      --rust: #a55d35;

      /* E-Score Dimensions */
      --escore-hold: #4ecdc4;
      --escore-burn: #ff6b35;
      --escore-use: #9b59b6;
      --escore-build: #3498db;
      --escore-run: #2ecc71;
      --escore-refer: #f39c12;
      --escore-time: #e74c3c;

      --bg: #000000;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      font-family: 'Inter', -apple-system, sans-serif;
      color: var(--white);
      -webkit-font-smoothing: antialiased;
      font-weight: 300;
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* ================================================================
       THREE.JS SPACE CONTAINER
       ================================================================ */
    #space-container {
      position: fixed;
      inset: 0;
      z-index: 1;
    }

    /* ================================================================
       SINGULARITY - Fixed CSS Black Hole
       ================================================================ */
    .singularity {
      position: fixed;
      inset: 0;
      z-index: 2;
      pointer-events: none;
      overflow: hidden;
    }

    .black-hole {
      position: absolute;
      bottom: -40vh;
      left: 50%;
      transform: translateX(-50%);
      width: 320px;
      height: 320px;
      transition: bottom 0.15s ease-out, transform 0.15s ease-out;
    }

    .event-horizon {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: #000;
      box-shadow:
        0 0 0 1px rgba(201,162,39,0.15),
        inset 0 0 80px 30px rgba(0,0,0,1);
    }

    .photon-ring {
      position: absolute;
      inset: -10px;
      border-radius: 50%;
      background: transparent;
      box-shadow:
        0 0 60px 12px rgba(201,162,39,0.5),
        0 0 100px 30px rgba(201,162,39,0.25),
        0 0 150px 50px rgba(201,162,39,0.1),
        inset 0 0 30px 8px rgba(201,162,39,0.4);
      animation: photon-pulse 4s ease-in-out infinite;
    }

    @keyframes photon-pulse {
      0%, 100% { opacity: 0.85; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.03); }
    }

    .accretion-disk {
      position: absolute;
      inset: -120px;
      border-radius: 50%;
      background:
        linear-gradient(90deg, transparent 0%, rgba(201,162,39,0.2) 25%, rgba(255,180,80,0.25) 50%, rgba(201,162,39,0.2) 75%, transparent 100%);
      background-size: 200% 100%;
      transform: rotateX(75deg);
      animation: accretion-spin 18s linear infinite;
      opacity: 0.8;
    }

    @keyframes accretion-spin {
      from { background-position: 0% 50%; }
      to { background-position: 200% 50%; }
    }

    .lensing {
      position: absolute;
      inset: -200px;
      border-radius: 50%;
      background: radial-gradient(circle at center,
        transparent 30%,
        rgba(201,162,39,0.02) 40%,
        rgba(201,162,39,0.04) 50%,
        transparent 70%
      );
      animation: lensing-rotate 60s linear infinite;
    }

    @keyframes lensing-rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* ================================================================
       CONTENT LAYER
       ================================================================ */
    .content {
      position: relative;
      z-index: 10;
    }

    section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: var(--space-3xl) var(--space-lg);
      position: relative;
    }

    section::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse at center, rgba(0,0,0,0.3) 0%, transparent 70%);
      pointer-events: none;
    }

    .container {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    /* Typography */
    .display-title {
      font-size: clamp(var(--text-2xl), 10vw, var(--text-3xl));
      font-weight: 200;
      letter-spacing: -0.04em;
      line-height: 1.05;
      text-shadow: 0 2px 40px rgba(0,0,0,0.8);
    }

    .section-title {
      font-size: clamp(var(--text-xl), 6vw, var(--text-2xl));
      font-weight: 200;
      letter-spacing: -0.03em;
      line-height: 1.1;
      margin-bottom: var(--space-md);
      text-shadow: 0 2px 30px rgba(0,0,0,0.6);
    }

    .body-text {
      font-size: var(--text-md);
      font-weight: 300;
      color: var(--white-70);
      line-height: 1.8;
      max-width: 550px;
      text-shadow: 0 1px 10px rgba(0,0,0,0.5);
    }

    .label {
      font-size: var(--text-xs);
      font-weight: 400;
      color: var(--white-50);
      text-transform: uppercase;
      letter-spacing: 0.2em;
      margin-bottom: var(--space-lg);
    }

    .highlight { color: var(--gold); }
    .flame-text { color: var(--flame); }

    /* ================================================================
       NAVIGATION
       ================================================================ */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      padding: var(--space-lg) var(--space-xl);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(30px);
    }

    .logo {
      font-size: var(--text-sm);
      font-weight: 400;
      letter-spacing: 0.05em;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    .logo .phi { color: var(--gold); font-style: italic; font-family: Georgia, serif; }

    .nav-ecosystem {
      display: flex;
      gap: var(--space-lg);
    }

    .nav-pill {
      font-size: var(--text-xs);
      padding: var(--space-xs) var(--space-md);
      border: 1px solid var(--white-10);
      border-radius: 100px;
      color: var(--white-50);
      text-decoration: none;
      transition: all 0.3s;
    }
    .nav-pill:hover { border-color: var(--gold); color: var(--gold); }
    .nav-pill.active { border-color: var(--gold); color: var(--gold); background: var(--gold-soft); }

    .nav-cta {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      background: transparent;
      border: 1px solid var(--white-30);
      padding: var(--space-sm) var(--space-lg);
      font-size: var(--text-xs);
      font-weight: 400;
      color: var(--white-70);
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 8px;
    }
    .nav-cta:hover {
      background: var(--white-05);
      border-color: var(--gold);
      color: var(--gold);
    }
    .nav-cta.connected {
      background: var(--gold-soft);
      border-color: var(--gold);
      color: var(--gold);
    }
    .nav-cta .wallet-icon {
      font-size: 14px;
    }
    .nav-cta .wallet-addr {
      font-family: monospace;
      font-size: 11px;
      letter-spacing: 0;
    }

    /* ================================================================
       HERO SECTION
       ================================================================ */
    #hero { text-align: center; padding-top: var(--space-3xl); }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      font-size: var(--text-xs);
      color: var(--white-50);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: var(--space-2xl);
    }
    .hero-badge::before {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--gold);
      border-radius: 50%;
      animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(0.9); }
    }

    .hero-phi {
      font-size: 120px;
      font-style: italic;
      font-family: 'Times New Roman', Georgia, serif;
      color: var(--gold);
      opacity: 0.7;
      line-height: 1;
      margin-bottom: var(--space-lg);
      transition: all 0.5s;
    }
    .hero-phi:hover { opacity: 1; transform: scale(1.1); text-shadow: 0 0 60px var(--gold); }

    .hero-subtitle {
      font-size: var(--text-lg);
      font-weight: 300;
      color: var(--white-70);
      max-width: 600px;
      margin: var(--space-lg) auto var(--space-2xl);
      line-height: 1.7;
    }

    .hero-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-lg);
      margin-top: var(--space-2xl);
      padding: var(--space-lg);
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 8px;
    }

    .stat-item { text-align: center; }
    .stat-value {
      font-size: var(--text-xl);
      font-weight: 200;
      font-variant-numeric: tabular-nums;
    }
    .stat-label {
      font-size: var(--text-xs);
      color: var(--white-50);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-top: var(--space-xs);
    }

    /* ================================================================
       ECOSYSTEM TRIAD
       ================================================================ */
    .triad-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-lg);
      margin-top: var(--space-xl);
    }

    .triad-card {
      background: rgba(0,0,0,0.5);
      border: 1px solid var(--white-10);
      backdrop-filter: blur(10px);
      padding: var(--space-xl);
      text-align: center;
      transition: all 0.4s;
      position: relative;
      overflow: hidden;
    }

    .triad-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .triad-card:hover {
      border-color: var(--gold-soft);
      transform: translateY(-5px);
    }
    .triad-card:hover::before { opacity: 1; }

    .triad-icon {
      font-size: 48px;
      margin-bottom: var(--space-lg);
    }

    .triad-name {
      font-size: var(--text-md);
      font-weight: 500;
      margin-bottom: var(--space-xs);
    }

    .triad-tagline {
      font-size: var(--text-xs);
      color: var(--gold);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: var(--space-md);
    }

    .triad-desc {
      font-size: var(--text-sm);
      color: var(--white-70);
      line-height: 1.6;
    }

    /* ================================================================
       DUAL BURN FLYWHEEL
       ================================================================ */
    .flywheel-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: var(--space-2xl) 0;
    }

    .flywheel-visual {
      position: relative;
      width: 350px;
      height: 350px;
      margin: var(--space-xl) 0;
    }

    .flywheel-ring {
      position: absolute;
      inset: 0;
      border: 2px solid var(--white-10);
      border-radius: 50%;
      animation: flywheel-rotate 20s linear infinite;
    }

    .flywheel-ring::before {
      content: '';
      position: absolute;
      top: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 8px;
      background: var(--gold);
      border-radius: 50%;
      box-shadow: 0 0 15px var(--gold);
    }

    @keyframes flywheel-rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .flywheel-center {
      position: absolute;
      inset: 60px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.8);
      border: 1px solid var(--gold-soft);
      border-radius: 50%;
    }

    .flywheel-center .flame { font-size: 48px; }
    .flywheel-center .rate {
      font-size: var(--text-xl);
      font-weight: 200;
      color: var(--flame);
      margin-top: var(--space-sm);
    }

    .flywheel-nodes {
      position: absolute;
      inset: 0;
    }

    .flywheel-node {
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .flywheel-node-icon {
      width: 48px;
      height: 48px;
      background: var(--bg);
      border: 1px solid var(--white-30);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      margin-bottom: var(--space-xs);
      transition: all 0.3s;
    }

    .flywheel-node:hover .flywheel-node-icon {
      border-color: var(--gold);
      transform: scale(1.1);
    }

    .flywheel-node-label {
      font-size: var(--text-xs);
      color: var(--white-70);
      white-space: nowrap;
    }

    /* Node positions (golden ratio angles) */
    .flywheel-node:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); }
    .flywheel-node:nth-child(2) { top: 25%; right: 0; }
    .flywheel-node:nth-child(3) { bottom: 25%; right: 0; }
    .flywheel-node:nth-child(4) { bottom: 0; left: 50%; transform: translateX(-50%); }
    .flywheel-node:nth-child(5) { bottom: 25%; left: 0; }
    .flywheel-node:nth-child(6) { top: 25%; left: 0; }

    .flywheel-splits {
      display: flex;
      gap: var(--space-2xl);
      margin-top: var(--space-xl);
    }

    .split-item {
      text-align: center;
    }

    .split-value {
      font-size: var(--text-lg);
      font-weight: 300;
    }

    .split-label {
      font-size: var(--text-xs);
      color: var(--white-50);
      margin-top: var(--space-xs);
    }

    /* ================================================================
       K-SCORE TIERS
       ================================================================ */
    .kscore-container {
      width: 100%;
    }

    .kscore-bar {
      height: 6px;
      background: linear-gradient(90deg,
        var(--rust) 0%,
        var(--bronze) 20%,
        var(--silver) 40%,
        var(--gold-tier) 60%,
        var(--platinum) 80%,
        var(--diamond) 100%
      );
      border-radius: 3px;
      margin: var(--space-xl) 0;
      position: relative;
    }

    .kscore-cursor {
      position: absolute;
      top: -8px;
      width: 20px;
      height: 20px;
      background: var(--white);
      border: 2px solid var(--gold);
      border-radius: 50%;
      transform: translateX(-50%);
      transition: left 0.5s ease-out;
      box-shadow: 0 0 15px var(--gold);
    }

    .kscore-tiers {
      display: flex;
      justify-content: space-between;
    }

    .kscore-tier {
      text-align: center;
      padding: var(--space-md);
      cursor: pointer;
      transition: all 0.3s;
    }

    .kscore-tier:hover {
      transform: translateY(-3px);
    }

    .kscore-tier-icon {
      font-size: var(--text-lg);
      margin-bottom: var(--space-xs);
    }

    .kscore-tier-name {
      font-size: var(--text-xs);
      color: var(--white-50);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .kscore-tier-range {
      font-size: 11px;
      color: var(--white-30);
      margin-top: 2px;
    }

    /* ================================================================
       E-SCORE RADAR
       ================================================================ */
    .escore-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-2xl);
      align-items: center;
    }

    .escore-radar {
      width: 300px;
      height: 300px;
      position: relative;
    }

    .escore-radar svg {
      width: 100%;
      height: 100%;
    }

    .escore-dimensions {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
    }

    .escore-dim {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-sm) var(--space-md);
      background: var(--white-05);
      border-radius: 4px;
      transition: all 0.3s;
    }

    .escore-dim:hover {
      background: var(--white-10);
    }

    .escore-dim-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .escore-dim-name {
      font-size: var(--text-sm);
      font-weight: 400;
      flex: 1;
    }

    .escore-dim-weight {
      font-size: var(--text-xs);
      color: var(--white-50);
      font-family: 'SF Mono', monospace;
    }

    .escore-dim-bar {
      width: 60px;
      height: 4px;
      background: var(--white-10);
      border-radius: 2px;
      overflow: hidden;
    }

    .escore-dim-fill {
      height: 100%;
      border-radius: 2px;
      transition: width 0.5s ease-out;
    }

    /* ================================================================
       COMBINED DISCOUNT DISPLAY
       ================================================================ */
    .discount-compare {
      display: flex;
      gap: var(--space-lg);
      padding: var(--space-xl);
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 8px;
      margin-top: var(--space-xl);
    }

    .discount-option {
      flex: 1;
      padding: var(--space-lg);
      border-radius: 6px;
      text-align: center;
      transition: all 0.3s;
    }

    .discount-option.active {
      background: var(--gold-soft);
      border: 1px solid var(--gold);
    }

    .discount-option.inactive {
      opacity: 0.5;
    }

    .discount-source {
      font-size: var(--text-xs);
      color: var(--white-50);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--space-sm);
    }

    .discount-value {
      font-size: var(--text-2xl);
      font-weight: 200;
      color: var(--gold);
    }

    .discount-badge {
      font-size: var(--text-xs);
      color: var(--gold);
      margin-top: var(--space-sm);
    }

    /* ================================================================
       PHI FORMULAS
       ================================================================ */
    .formulas-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-lg);
      margin-top: var(--space-xl);
    }

    .formula-card {
      padding: var(--space-lg);
      border-left: 2px solid var(--white-10);
      background: rgba(0,0,0,0.3);
      transition: all 0.3s;
    }

    .formula-card:hover {
      border-left-color: var(--gold);
    }

    .formula-label {
      font-size: var(--text-xs);
      font-weight: 400;
      color: var(--white-50);
      letter-spacing: 0.1em;
      margin-bottom: var(--space-sm);
    }

    .formula-code {
      font-family: 'SF Mono', 'Monaco', monospace;
      font-size: var(--text-sm);
      color: var(--white-70);
    }

    .formula-result {
      font-size: var(--text-lg);
      font-weight: 300;
      margin-top: var(--space-sm);
    }

    /* ================================================================
       CTA SECTION
       ================================================================ */
    .cta-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-md);
      margin-top: var(--space-xl);
    }

    .cta-btn {
      padding: var(--space-lg) var(--space-xl);
      font-size: var(--text-sm);
      font-weight: 500;
      letter-spacing: 0.05em;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
    }

    .cta-btn-primary {
      background: var(--gold);
      color: #000;
      border: none;
    }
    .cta-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(201,162,39,0.4);
    }

    .cta-btn-secondary {
      background: transparent;
      color: var(--white-70);
      border: 1px solid var(--white-30);
    }
    .cta-btn-secondary:hover {
      border-color: var(--white);
      color: var(--white);
    }

    /* ================================================================
       FOOTER
       ================================================================ */
    footer {
      padding: var(--space-2xl) var(--space-lg);
      text-align: center;
      border-top: 1px solid var(--white-10);
      background: rgba(0,0,0,0.5);
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: var(--space-2xl);
      margin-bottom: var(--space-lg);
    }

    .footer-links a {
      font-size: var(--text-xs);
      color: var(--white-30);
      text-decoration: none;
      letter-spacing: 0.1em;
      transition: color 0.3s;
    }

    .footer-links a:hover { color: var(--white); }

    .footer-copy {
      font-size: var(--text-xs);
      color: var(--white-30);
    }

    /* ================================================================
       ANIMATIONS
       ================================================================ */
    .reveal {
      opacity: 0;
      transform: translateY(15px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* ================================================================
       RESPONSIVE - Apple-Quality Mobile Experience
       ================================================================ */

    /* === MOBILE FIRST: Base fixes === */
    @media (max-width: 768px) {
      /* Root spacing adjustments for mobile */
      :root {
        --space-lg: 21px;
        --space-xl: 34px;
        --space-2xl: 55px;
        --space-3xl: 89px;
        --text-xl: 26px;
        --text-2xl: 34px;
        --text-3xl: 44px;
      }

      /* Prevent horizontal overflow */
      html, body {
        overflow-x: hidden;
        width: 100%;
      }

      /* Section base */
      section {
        padding: var(--space-xl) var(--space-md);
        min-height: auto;
      }

      /* Container width */
      .container {
        width: 100%;
        padding: 0 var(--space-sm);
      }

      /* === NAVIGATION === */
      nav {
        padding: var(--space-sm) var(--space-md);
      }

      .nav-ecosystem { display: none; }

      .nav-cta {
        padding: var(--space-xs) var(--space-md);
        font-size: 11px;
      }

      .logo {
        font-size: 13px;
      }

      /* === HERO === */
      #hero {
        padding-top: calc(var(--space-3xl) + 20px);
        padding-bottom: var(--space-xl);
      }

      .hero-phi {
        font-size: 72px;
        margin-bottom: var(--space-md);
      }

      .display-title {
        font-size: var(--text-2xl);
        padding: 0 var(--space-xs);
      }

      .hero-subtitle {
        font-size: var(--text-md);
        padding: 0 var(--space-sm);
        margin: var(--space-md) auto var(--space-lg);
      }

      .hero-badge {
        font-size: 10px;
        margin-bottom: var(--space-lg);
      }

      .hero-stats {
        grid-template-columns: 1fr;
        gap: var(--space-sm);
        padding: var(--space-md);
      }

      .stat-item {
        padding: var(--space-sm) 0;
        border-bottom: 1px solid var(--white-10);
      }

      .stat-item:last-child {
        border-bottom: none;
      }

      .stat-value {
        font-size: var(--text-lg);
      }

      /* === GRIDS - Stack vertically === */
      .triad-grid,
      .escore-section,
      .formulas-grid,
      .cta-grid,
      .value-grid {
        grid-template-columns: 1fr;
        gap: var(--space-md);
      }

      /* === TRIAD CARDS === */
      .triad-card {
        padding: var(--space-lg);
      }

      .triad-icon {
        font-size: 36px;
        margin-bottom: var(--space-md);
      }

      /* === FLYWHEEL === */
      .flywheel-container {
        padding: var(--space-lg) 0;
      }

      .flywheel-visual {
        width: 240px;
        height: 240px;
        margin: var(--space-md) 0;
      }

      .flywheel-center {
        inset: 35px;
      }

      .flywheel-center .flame {
        font-size: 32px;
      }

      .flywheel-center .rate {
        font-size: var(--text-lg);
      }

      .flywheel-node-icon {
        width: 36px;
        height: 36px;
        font-size: 16px;
      }

      .flywheel-node-label {
        font-size: 10px;
      }

      .flywheel-splits {
        flex-direction: column;
        gap: var(--space-md);
        align-items: center;
      }

      /* === K-SCORE TIERS === */
      .kscore-container {
        padding: 0 var(--space-sm);
      }

      .kscore-tiers {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-xs);
      }

      .kscore-tier {
        padding: var(--space-sm);
      }

      .kscore-tier-icon {
        font-size: var(--text-md);
      }

      .kscore-tier-name {
        font-size: 9px;
      }

      .kscore-tier-range {
        font-size: 8px;
      }

      /* === E-SCORE === */
      .escore-radar {
        width: 200px;
        height: 200px;
        margin: 0 auto var(--space-lg);
      }

      .escore-dim {
        padding: var(--space-xs) var(--space-sm);
      }

      .escore-dim-icon {
        width: 28px;
        height: 28px;
        font-size: 12px;
      }

      .escore-dim-bar {
        width: 40px;
      }

      /* === DISCOUNT COMPARE === */
      .discount-compare {
        flex-direction: column;
        gap: var(--space-md);
        padding: var(--space-md);
      }

      .discount-value {
        font-size: var(--text-xl);
      }

      /* === FORMULAS === */
      .formula-card {
        padding: var(--space-md);
      }

      .formula-code {
        font-size: 12px;
        word-break: break-all;
      }

      /* === TRY IT / APPS === */
      .apps-tabs {
        gap: var(--space-xs);
        padding: 0 var(--space-sm);
      }

      .app-tab {
        padding: var(--space-xs) var(--space-sm);
        font-size: 11px;
      }

      .app-panels {
        padding: 0 var(--space-md);
      }

      .app-panel {
        padding: var(--space-md);
      }

      /* === VALUE CARDS === */
      .value-card {
        padding: var(--space-lg);
      }

      .value-icon {
        font-size: 28px;
      }

      /* === CTA BUTTONS === */
      .cta-btn {
        padding: var(--space-md) var(--space-lg);
        font-size: var(--text-sm);
        width: 100%;
      }

      /* === FOOTER === */
      .footer-links {
        flex-wrap: wrap;
        gap: var(--space-md);
      }

      /* === BLACK HOLE - Mobile optimized + Tappable === */
      .singularity {
        z-index: 15; /* Above .content (z-index: 10) for taps */
      }

      .black-hole {
        width: 150px;
        height: 150px;
        bottom: -30vh;
        cursor: pointer;
        pointer-events: auto;
      }

      /* Subtle tap hint - pulsing ring */
      .black-hole::after {
        content: '';
        position: absolute;
        inset: -20px;
        border-radius: 50%;
        border: 1px solid var(--gold);
        opacity: 0;
        animation: tapHint 3s ease-in-out infinite;
      }

      @keyframes tapHint {
        0%, 100% { opacity: 0; transform: scale(1); }
        50% { opacity: 0.4; transform: scale(1.1); }
      }

      .accretion-disk {
        inset: -60px;
      }

      .lensing {
        inset: -100px;
      }

      .photon-ring {
        inset: -5px;
        box-shadow:
          0 0 30px 6px rgba(201,162,39,0.5),
          0 0 50px 15px rgba(201,162,39,0.25),
          inset 0 0 15px 4px rgba(201,162,39,0.4);
      }

      /* === PROGRESS NAV - Hide on mobile === */
      .progress-nav {
        display: none;
      }

      /* === SECTION TITLES === */
      .section-title {
        font-size: var(--text-xl);
        text-align: center;
        padding: 0 var(--space-sm);
      }

      .section-subtitle,
      .body-text {
        font-size: var(--text-sm);
        text-align: center;
        padding: 0 var(--space-sm);
      }

      /* === TABLES === */
      table {
        font-size: 11px;
      }

      th, td {
        padding: var(--space-xs) !important;
      }
    }

    /* === SMALL PHONES (iPhone SE, etc.) === */
    @media (max-width: 375px) {
      :root {
        --text-2xl: 28px;
        --text-3xl: 36px;
      }

      .hero-phi {
        font-size: 56px;
      }

      .flywheel-visual {
        width: 200px;
        height: 200px;
      }

      .kscore-tiers {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* === TABLET === */
    @media (min-width: 769px) and (max-width: 1024px) {
      .triad-grid { grid-template-columns: repeat(3, 1fr); }
      .value-grid { grid-template-columns: repeat(2, 1fr); }
      .formulas-grid { grid-template-columns: repeat(2, 1fr); }
    }

    /* === VALUE GRID TABLET === */
    @media (max-width: 900px) {
      .value-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 500px) {
      .value-grid { grid-template-columns: 1fr; }
    }

    /* ================================================================
       BURN STATS MODAL (Mobile Black Hole Tap)
       ================================================================ */
    .burn-modal {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 10000;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(20px);
      align-items: center;
      justify-content: center;
      padding: var(--space-lg);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .burn-modal.active {
      display: flex;
      opacity: 1;
    }

    .burn-modal-content {
      background: var(--bg);
      border: 1px solid var(--gold);
      border-radius: 16px;
      padding: var(--space-xl);
      max-width: 340px;
      width: 100%;
      text-align: center;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .burn-modal.active .burn-modal-content {
      transform: scale(1);
    }

    .burn-modal-close {
      position: absolute;
      top: var(--space-lg);
      right: var(--space-lg);
      background: none;
      border: none;
      color: var(--white-50);
      font-size: 24px;
      cursor: pointer;
    }

    .burn-modal-icon {
      font-size: 48px;
      margin-bottom: var(--space-md);
    }

    .burn-modal-title {
      font-size: var(--text-lg);
      font-weight: 300;
      margin-bottom: var(--space-lg);
      color: var(--gold);
    }

    .burn-stat-row {
      display: flex;
      justify-content: space-between;
      padding: var(--space-sm) 0;
      border-bottom: 1px solid var(--white-10);
    }

    .burn-stat-row:last-child {
      border-bottom: none;
    }

    .burn-stat-label {
      color: var(--white-50);
      font-size: var(--text-sm);
    }

    .burn-stat-value {
      color: var(--white);
      font-size: var(--text-sm);
      font-weight: 500;
      font-variant-numeric: tabular-nums;
    }

    .burn-stat-value.flame {
      color: var(--flame);
    }

    /* ================================================================
       WALLET MODAL - Desktop-first design
       ================================================================ */
    .wallet-modal {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 10001;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(8px);
      justify-content: center;
      align-items: center;
      padding: var(--space-xl);
    }

    .wallet-modal.active {
      display: flex;
    }

    .wallet-modal-content {
      background: linear-gradient(180deg, rgba(20,20,20,0.98) 0%, rgba(10,10,10,0.98) 100%);
      border: 1px solid var(--white-10);
      border-radius: 16px;
      padding: var(--space-xl);
      width: 100%;
      max-width: 400px;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
      animation: modalSlideIn 0.2s ease-out;
    }

    @keyframes modalSlideIn {
      from { opacity: 0; transform: scale(0.95) translateY(-10px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    .wallet-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--white-10);
    }

    .wallet-modal-title {
      font-size: var(--text-md);
      font-weight: 500;
      color: var(--white);
    }

    .wallet-modal-close {
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 8px;
      color: var(--white-50);
      width: 32px;
      height: 32px;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .wallet-modal-close:hover {
      background: var(--white-10);
      border-color: var(--white-20);
      color: var(--white);
    }

    .wallet-options-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
    }

    .wallet-option {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-md);
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      color: inherit;
    }

    .wallet-option:hover {
      background: var(--white-10);
      border-color: var(--gold);
      transform: translateX(4px);
    }

    .wallet-option-icon {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      flex-shrink: 0;
    }

    .wallet-option-icon.phantom {
      background: linear-gradient(135deg, #ab9ff2, #534bb1);
    }

    .wallet-option-icon.solflare {
      background: linear-gradient(135deg, #fc8c03, #f5a623);
    }

    .wallet-option-info {
      flex: 1;
      text-align: left;
    }

    .wallet-option-name {
      font-size: var(--text-sm);
      font-weight: 500;
      color: var(--white);
    }

    .wallet-option-status {
      font-size: 11px;
      color: var(--white-50);
      margin-top: 2px;
    }

    .wallet-option-status.detected {
      color: var(--flame);
    }

    .wallet-option-arrow {
      color: var(--white-30);
      font-size: 18px;
      transition: transform 0.2s;
    }

    .wallet-option:hover .wallet-option-arrow {
      transform: translateX(4px);
      color: var(--gold);
    }

    .wallet-option.not-installed {
      opacity: 0.6;
    }

    .wallet-option.not-installed .wallet-option-status {
      color: var(--white-30);
    }

    /* Connected State */
    .wallet-connected-view {
      text-align: center;
    }

    .wallet-connected-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      margin-bottom: var(--space-lg);
    }

    .wallet-connected-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--gold-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .wallet-address-display {
      font-family: monospace;
      font-size: var(--text-sm);
      color: var(--gold);
      background: var(--white-05);
      padding: var(--space-sm) var(--space-md);
      border-radius: 8px;
      border: 1px solid var(--white-10);
      display: inline-block;
      margin-bottom: var(--space-lg);
    }

    .wallet-stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-sm);
      margin-bottom: var(--space-lg);
    }

    .wallet-stat-card {
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 10px;
      padding: var(--space-md);
      text-align: center;
    }

    .wallet-stat-card.full-width {
      grid-column: span 2;
    }

    .wallet-stat-label {
      color: var(--white-50);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--space-xs);
    }

    .wallet-stat-value {
      font-size: var(--text-md);
      font-weight: 600;
      color: var(--white);
    }

    .wallet-stat-value.gold {
      color: var(--gold);
    }

    .wallet-disconnect-btn {
      width: 100%;
      padding: var(--space-sm) var(--space-md);
      background: transparent;
      border: 1px solid var(--white-20);
      border-radius: 8px;
      color: var(--white-50);
      font-size: var(--text-xs);
      cursor: pointer;
      transition: all 0.2s;
    }

    .wallet-disconnect-btn:hover {
      border-color: var(--flame);
      color: var(--flame);
      background: rgba(255,90,50,0.1);
    }

    /* Mobile: Bottom sheet style */
    @media (max-width: 768px) {
      .wallet-modal {
        align-items: flex-end;
        padding: 0;
      }

      .wallet-modal-content {
        max-width: 100%;
        border-radius: 20px 20px 0 0;
        padding-bottom: calc(var(--space-xl) + env(safe-area-inset-bottom));
        animation: modalSlideUp 0.3s ease-out;
      }

      @keyframes modalSlideUp {
        from { transform: translateY(100%); }
        to { transform: translateY(0); }
      }
    }

    /* ================================================================
       PROGRESS NAVIGATION - Solana Culture Edition
       ================================================================ */
    .progress-nav {
      position: fixed;
      right: var(--space-md);
      top: 50%;
      transform: translateY(-50%);
      z-index: 100;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
    }

    .progress-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--white-20);
      border: 1px solid var(--white-30);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .progress-dot:hover {
      background: var(--white-50);
      transform: scale(1.3);
    }

    .progress-dot.active {
      background: var(--gold);
      border-color: var(--gold);
      box-shadow: 0 0 8px var(--gold);
    }

    .progress-label {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 11px;
      font-weight: 500;
      color: var(--gold);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      white-space: nowrap;
      opacity: 0.9;
    }

    @media (max-width: 768px) {
      .progress-nav { display: none; }
    }

    /* ================================================================
       VALUE PROPOSITION - For Everyone
       ================================================================ */
    #value {
      min-height: auto;
      padding: var(--space-3xl) var(--space-lg);
    }

    .value-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--space-lg);
      max-width: 1100px;
      margin: var(--space-xl) auto 0;
    }

    .value-card {
      padding: var(--space-xl);
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 12px;
      text-align: center;
      transition: all 0.3s;
    }

    .value-card:hover {
      border-color: var(--gold);
      background: var(--gold-soft);
      transform: translateY(-4px);
    }

    .value-icon {
      font-size: 32px;
      margin-bottom: var(--space-md);
    }

    .value-title {
      font-size: var(--text-md);
      font-weight: 500;
      color: var(--white);
      margin-bottom: var(--space-sm);
    }

    .value-desc {
      font-size: var(--text-sm);
      color: var(--white-70);
      line-height: 1.6;
    }

    .value-highlight {
      display: inline-block;
      margin-top: var(--space-md);
      padding: var(--space-xs) var(--space-sm);
      background: var(--white-10);
      border-radius: 4px;
      font-size: var(--text-xs);
      color: var(--gold);
      font-weight: 500;
    }

    @media (max-width: 900px) {
      .value-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 500px) {
      .value-grid { grid-template-columns: 1fr; }
    }

    /* ================================================================
       5 MINI APPS - Try It Section
       ================================================================ */
    #try { padding: var(--space-3xl) 0; }

    .apps-tabs {
      display: flex;
      justify-content: center;
      gap: var(--space-xs);
      margin-bottom: var(--space-xl);
      flex-wrap: wrap;
    }

    .app-tab {
      padding: var(--space-sm) var(--space-lg);
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 8px;
      color: var(--white-70);
      font-size: var(--text-sm);
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .app-tab:hover {
      background: var(--white-10);
      color: var(--white);
    }

    .app-tab.active {
      background: var(--gold-soft);
      border-color: var(--gold);
      color: var(--gold);
    }

    .app-panels {
      max-width: 500px;
      margin: 0 auto;
    }

    .app-panel {
      display: none;
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 16px;
      padding: var(--space-xl);
    }

    .app-panel.active { display: block; }

    .app-header {
      text-align: center;
      margin-bottom: var(--space-lg);
    }

    .app-header h3 {
      font-size: var(--text-lg);
      font-weight: 500;
      margin-bottom: var(--space-xs);
    }

    .app-header p {
      color: var(--white-50);
      font-size: var(--text-sm);
    }

    .app-form {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
    }

    /* Jupiter Terminal Container */
    .jupiter-container {
      min-height: 400px;
      border-radius: 12px;
      overflow: hidden;
    }

    .jupiter-container iframe {
      border: none !important;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
    }

    .form-group label {
      font-size: var(--text-xs);
      color: var(--white-50);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-row {
      display: flex;
      gap: var(--space-md);
    }

    .form-row .form-group { flex: 1; }

    .form-input, .form-select, .form-textarea {
      background: var(--white-05);
      border: 1px solid var(--white-10);
      border-radius: 8px;
      padding: var(--space-sm) var(--space-md);
      color: var(--white);
      font-size: var(--text-md);
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--gold);
    }

    .form-textarea {
      min-height: 80px;
      resize: vertical;
    }

    .form-select { cursor: pointer; }

    .empty-count, .reclaim-amount {
      font-size: var(--text-xl);
      font-weight: 500;
      color: var(--white);
    }

    .reclaim-amount { color: var(--gold); }

    .app-btn {
      background: var(--gold);
      color: #000;
      border: none;
      border-radius: 8px;
      padding: var(--space-md) var(--space-lg);
      font-size: var(--text-md);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: var(--space-sm);
    }

    .app-btn:hover:not(:disabled) {
      background: #d4ab2a;
      transform: translateY(-1px);
    }

    .app-btn:disabled {
      background: var(--white-20);
      color: var(--white-50);
      cursor: not-allowed;
    }

    .app-status {
      margin-top: var(--space-md);
      padding: var(--space-sm) var(--space-md);
      border-radius: 8px;
      font-size: var(--text-sm);
      text-align: center;
      min-height: 20px;
    }

    .app-status.success {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: #22c55e;
    }

    .app-status.error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #ef4444;
    }

    .app-status.pending {
      background: rgba(201, 162, 39, 0.1);
      border: 1px solid rgba(201, 162, 39, 0.3);
      color: var(--gold);
    }
  </style>
</head>
<body>
  <!-- Three.js Space -->
  <div id="space-container"></div>

  <!-- CSS Singularity -->
  <div class="singularity">
    <div class="black-hole" id="blackHole">
      <div class="lensing"></div>
      <div class="accretion-disk"></div>
      <div class="photon-ring"></div>
      <div class="event-horizon"></div>
    </div>
  </div>

  <!-- Progress Navigation -->
  <div class="progress-nav">
    <span class="progress-label">start</span>
    <div class="progress-dot active" data-section="hero" title="Overview"></div>
    <div class="progress-dot" data-section="value" title="Value"></div>
    <div class="progress-dot" data-section="try" title="Try It"></div>
    <div class="progress-dot" data-section="ecosystem" title="Ecosystem"></div>
    <div class="progress-dot" data-section="flywheel" title="Flywheel"></div>
    <div class="progress-dot" data-section="kscore" title="K-Score"></div>
    <div class="progress-dot" data-section="escore" title="E-Score"></div>
    <div class="progress-dot" data-section="cta" title="Start"></div>
  </div>

  <nav>
    <div class="logo"><span class="phi">&phi;</span> $asdfasdfa</div>
    <div class="nav-ecosystem">
      <a href="#value" class="nav-pill active">Why</a>
      <a href="#try" class="nav-pill">Try It</a>
      <a href="#ecosystem" class="nav-pill">How</a>
      <a href="#kscore" class="nav-pill">K-Score</a>
    </div>
    <button class="nav-cta" id="navWalletBtn">
      <span class="wallet-icon">ðŸ‘›</span>
      <span id="navWalletText">Connect</span>
    </button>
  </nav>

  <div class="content">
    <!-- HERO -->
    <section id="hero">
      <div class="container">
        <div class="hero-badge reveal">Gasless Infrastructure</div>
        <div class="hero-phi reveal">&phi;</div>
        <h1 class="display-title reveal">
          Pay gas with <span class="highlight">any token</span>
        </h1>
        <p class="hero-subtitle reveal">
          Your users don't need SOL. They pay with whatever they have.<br>
          All fees convert to <span class="flame-text">$asdfasdfa</span> and burn.
        </p>

        <div class="hero-stats reveal">
          <div class="stat-item">
            <div class="stat-value flame-text" id="statBurned">â€”</div>
            <div class="stat-label">Burned</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="statTx">â€”</div>
            <div class="stat-label">Transactions</div>
          </div>
          <div class="stat-item">
            <div class="stat-value highlight" id="statUptime">â€”</div>
            <div class="stat-label">Uptime</div>
          </div>
        </div>
      </div>
    </section>

    <!-- VALUE PROPOSITION - Why It Matters for Everyone -->
    <section id="value">
      <div class="container">
        <div class="label reveal">Why it matters</div>
        <h2 class="section-title reveal">Value for <span class="highlight">everyone</span></h2>
        <p class="section-subtitle reveal" style="text-align: center; max-width: 600px; margin: 0 auto; color: var(--white-70);">
          GASdf isn't just for $asdfasdfa holders. Every participant in the ecosystem benefits.
        </p>

        <div class="value-grid">
          <div class="value-card reveal">
            <div class="value-icon">ðŸ‘¤</div>
            <div class="value-title">Users</div>
            <div class="value-desc">
              No SOL? No problem.<br>
              Pay gas fees with any token you already hold.
            </div>
            <div class="value-highlight">Zero friction</div>
          </div>

          <div class="value-card reveal">
            <div class="value-icon">ðŸ‘¨â€ðŸ’»</div>
            <div class="value-title">Developers</div>
            <div class="value-desc">
              One API call. Gasless UX for your users. Higher retention.
            </div>
            <div class="value-highlight">Easy integration</div>
          </div>

          <div class="value-card reveal">
            <div class="value-icon">ðŸª™</div>
            <div class="value-title">Token Projects</div>
            <div class="value-desc">
              Get verified on HolDex. Your token becomes usable for gas payments.
            </div>
            <div class="value-highlight">More utility</div>
          </div>

          <div class="value-card reveal">
            <div class="value-icon">ðŸ”¥</div>
            <div class="value-title">$asdfasdfa Holders</div>
            <div class="value-desc">
              Fee discounts + every transaction burns supply. Deflationary by design.
            </div>
            <div class="value-highlight">Perpetual burn</div>
          </div>
        </div>
      </div>
    </section>

    <!-- TRY IT - 5 Mini Apps -->
    <section id="try">
      <div class="container">
        <div class="label reveal">Try it now</div>
        <h2 class="section-title reveal">5 ways to <span class="highlight">test GASdf</span></h2>

        <div class="apps-tabs reveal">
          <button class="app-tab active" data-app="burn">ðŸ”¥ Burn</button>
          <button class="app-tab" data-app="clean">ðŸ§¹ Clean</button>
          <button class="app-tab" data-app="swap">ðŸ”„ Swap</button>
          <button class="app-tab" data-app="message">ðŸ’¬ Message</button>
          <button class="app-tab" data-app="send">ðŸ“¤ Send</button>
        </div>

        <div class="app-panels">
          <!-- BURN -->
          <div class="app-panel active" id="panel-burn">
            <div class="app-header">
              <h3>Burn Tokens</h3>
              <p>Burn any token. Gas paid with that token.</p>
            </div>
            <div class="app-form">
              <div class="form-group">
                <label>Token to burn</label>
                <select id="burn-token" class="form-select">
                  <option value="">Connect wallet to see tokens</option>
                </select>
              </div>
              <div class="form-group">
                <label>Amount</label>
                <input type="text" id="burn-amount" class="form-input" placeholder="0.00">
              </div>
              <button class="app-btn" id="burn-btn" disabled>Connect Wallet</button>
            </div>
            <div class="app-status" id="burn-status"></div>
          </div>

          <!-- CLEAN -->
          <div class="app-panel" id="panel-clean">
            <div class="app-header">
              <h3>Clean Empty Accounts</h3>
              <p>Close empty token accounts. Reclaim SOL rent.</p>
            </div>
            <div class="app-form">
              <div class="form-group">
                <label>Empty accounts found</label>
                <div class="empty-count" id="clean-count">â€”</div>
              </div>
              <div class="form-group">
                <label>SOL to reclaim</label>
                <div class="reclaim-amount" id="clean-sol">â€” SOL</div>
              </div>
              <button class="app-btn" id="clean-btn" disabled>Connect Wallet</button>
            </div>
            <div class="app-status" id="clean-status"></div>
          </div>

          <!-- SWAP - Jupiter Terminal -->
          <div class="app-panel" id="panel-swap">
            <div class="app-header">
              <h3>Swap via Jupiter</h3>
              <p>Real swaps. Best rates. Gasless with GASdf.</p>
            </div>
            <div id="jupiter-terminal" class="jupiter-container"></div>
          </div>

          <!-- MESSAGE -->
          <div class="app-panel" id="panel-message">
            <div class="app-header">
              <h3>Onchain Message</h3>
              <p>Write a message to the blockchain. Forever.</p>
            </div>
            <div class="app-form">
              <div class="form-group">
                <label>Message (max 280 chars)</label>
                <textarea id="msg-text" class="form-textarea" maxlength="280" placeholder="Your message here..."></textarea>
              </div>
              <div class="form-group">
                <label>Pay gas with</label>
                <select id="msg-token" class="form-select">
                  <option value="">Select token</option>
                </select>
              </div>
              <button class="app-btn" id="msg-btn" disabled>Connect Wallet</button>
            </div>
            <div class="app-status" id="msg-status"></div>
          </div>

          <!-- SEND -->
          <div class="app-panel" id="panel-send">
            <div class="app-header">
              <h3>Send Tokens</h3>
              <p>Send any token. Gas paid with that token.</p>
            </div>
            <div class="app-form">
              <div class="form-group">
                <label>Recipient</label>
                <input type="text" id="send-to" class="form-input" placeholder="Wallet address...">
              </div>
              <div class="form-group">
                <label>Token</label>
                <select id="send-token" class="form-select">
                  <option value="">Select token</option>
                </select>
              </div>
              <div class="form-group">
                <label>Amount</label>
                <input type="text" id="send-amount" class="form-input" placeholder="0.00">
              </div>
              <button class="app-btn" id="send-btn" disabled>Connect Wallet</button>
            </div>
            <div class="app-status" id="send-status"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ECOSYSTEM TRIAD -->
    <section id="ecosystem">
      <div class="container">
        <div class="label reveal">How it works</div>
        <h2 class="section-title reveal">Three layers. <span class="highlight">One ecosystem.</span></h2>

        <div class="triad-grid">
          <div class="triad-card reveal" id="gasdf">
            <div class="triad-icon">â›½</div>
            <div class="triad-name">GASdf</div>
            <div class="triad-tagline">Gasless Transactions</div>
            <div class="triad-desc">
              We front the SOL for network fees.<br>
              Users pay with any token they hold.<br>
              All fees â†’ swap â†’ $asdfasdfa â†’ burn.
            </div>
          </div>
          <div class="triad-card reveal">
            <div class="triad-icon">ðŸ“Š</div>
            <div class="triad-name">HolDex</div>
            <div class="triad-tagline">Token Verification</div>
            <div class="triad-desc">
              K-Score measures holder conviction.<br>
              Are they accumulating or selling?<br>
              Only K â‰¥ 50 tokens accepted.
            </div>
          </div>
          <div class="triad-card reveal">
            <div class="triad-icon">âš¡</div>
            <div class="triad-name">E-Score</div>
            <div class="triad-tagline">Engagement Rewards</div>
            <div class="triad-desc">
              7 dimensions: Hold, Burn, Use, Build...<br>
              Higher engagement = lower fees.<br>
              Up to 95% discount.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- DUAL-BURN FLYWHEEL -->
    <section id="flywheel">
      <div class="container">
        <div class="flywheel-container reveal">
          <div class="label">The Flywheel</div>
          <h2 class="section-title">Every transaction <span class="flame-text">burns supply</span></h2>

          <div class="flywheel-visual">
            <div class="flywheel-ring"></div>
            <div class="flywheel-nodes">
              <div class="flywheel-node">
                <div class="flywheel-node-icon">ðŸ’³</div>
                <div class="flywheel-node-label">Payment</div>
              </div>
              <div class="flywheel-node">
                <div class="flywheel-node-icon">ðŸ”„</div>
                <div class="flywheel-node-label">Swap</div>
              </div>
              <div class="flywheel-node">
                <div class="flywheel-node-icon">ðŸ”¥</div>
                <div class="flywheel-node-label">Ecosystem Burn</div>
              </div>
              <div class="flywheel-node">
                <div class="flywheel-node-icon">ðŸ’°</div>
                <div class="flywheel-node-label">$asdfasdfa</div>
              </div>
              <div class="flywheel-node">
                <div class="flywheel-node-icon">ðŸ”¥</div>
                <div class="flywheel-node-label">Token Burn</div>
              </div>
              <div class="flywheel-node">
                <div class="flywheel-node-icon">ðŸ“ˆ</div>
                <div class="flywheel-node-label">Supply â†“</div>
              </div>
            </div>
            <div class="flywheel-center">
              <div class="flame">ðŸ”¥</div>
              <div class="rate" id="burnRateCenter">Variable</div>
            </div>
          </div>

          <!-- Hybrid Burn Model -->
          <div class="burn-model reveal" style="margin: var(--space-xl) 0; padding: var(--space-lg); background: rgba(0,0,0,0.4); border-radius: 8px; border: 1px solid var(--white-10);">
            <h3 style="color: var(--gold); margin-bottom: var(--space-md); font-size: var(--text-lg);">Hybrid Burn Model</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg); margin-bottom: var(--space-lg);">
              <div style="padding: var(--space-md); background: rgba(255,107,53,0.1); border-radius: 6px; border-left: 3px solid var(--escore-burn);">
                <div style="font-weight: 600; color: var(--escore-burn); margin-bottom: var(--space-xs);">Pay with $asdfasdfa</div>
                <div style="font-size: var(--text-xl); color: var(--white);">100% BURN</div>
                <div style="font-size: var(--text-xs); color: var(--white-50); margin-top: var(--space-xs);">Direct burn - no swap needed</div>
              </div>
              <div style="padding: var(--space-md); background: rgba(201,162,39,0.1); border-radius: 6px; border-left: 3px solid var(--gold);">
                <div style="font-weight: 600; color: var(--gold); margin-bottom: var(--space-xs);">Pay with Other Tokens</div>
                <div style="font-size: var(--text-xl); color: var(--white);">Swap + Split</div>
                <div style="font-size: var(--text-xs); color: var(--white-50); margin-top: var(--space-xs);">Token swapped to $asdfasdfa, then golden ratio split</div>
              </div>
            </div>
          </div>

          <div class="flywheel-splits">
            <div class="split-item">
              <div class="split-value flame-text" id="burnSplit">76.4%</div>
              <div class="split-label">Base Burn</div>
              <div style="font-size: var(--text-xs); color: var(--white-50);">1 - 1/Ï†Â³</div>
            </div>
            <div class="split-item">
              <div class="split-value highlight" id="treasurySplit">23.6%</div>
              <div class="split-label">Treasury</div>
              <div style="font-size: var(--text-xs); color: var(--white-50);">1/Ï†Â³</div>
            </div>
            <div class="split-item">
              <div class="split-value" style="color: var(--escore-burn);" id="ecosystemBonus">+38.2%</div>
              <div class="split-label">Max Eco Bonus</div>
              <div style="font-size: var(--text-xs); color: var(--white-50);">1/Ï†Â² Ã— curve</div>
            </div>
          </div>

          <p style="text-align: center; color: var(--white-50); font-size: var(--text-sm); margin-top: var(--space-lg); max-width: 600px; margin-left: auto; margin-right: auto;">
            <strong>Ecosystem Burn Bonus:</strong> Tokens that burn their own supply earn bonus allocation.<br>
            Formula: <code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 3px;">1/Ï†Â² Ã— (1 - Ï†^(-burnPct/30))</code>
          </p>
        </div>
      </div>
    </section>

    <!-- K-SCORE TIERS -->
    <section id="kscore">
      <div class="container">
        <div class="label reveal">Token Verification</div>
        <h2 class="section-title reveal">K-Score: <span class="highlight">Holder Conviction</span></h2>
        <p class="body-text reveal" style="text-align: center; margin: 0 auto var(--space-xl);">
          Measures whether holders are accumulating or selling.<br>
          Minimum Bronze (50) required for gas payment.
        </p>

        <div class="kscore-container reveal">
          <div class="kscore-bar">
            <div class="kscore-cursor" id="kscoreCursor" style="left: 75%;"></div>
          </div>
          <div class="kscore-tiers">
            <div class="kscore-tier" data-tier="rust" data-pos="10">
              <div class="kscore-tier-icon" style="color: var(--rust);">ðŸ”©</div>
              <div class="kscore-tier-name">Rust</div>
              <div class="kscore-tier-range">0-19</div>
            </div>
            <div class="kscore-tier" data-tier="iron" data-pos="20">
              <div class="kscore-tier-icon" style="color: #4a4a4a;">âš«</div>
              <div class="kscore-tier-name">Iron</div>
              <div class="kscore-tier-range">20-39</div>
            </div>
            <div class="kscore-tier" data-tier="copper" data-pos="30">
              <div class="kscore-tier-icon" style="color: #b87333;">ðŸŸ¤</div>
              <div class="kscore-tier-name">Copper</div>
              <div class="kscore-tier-range">40-49</div>
            </div>
            <div class="kscore-tier" data-tier="bronze" data-pos="40">
              <div class="kscore-tier-icon" style="color: var(--bronze);">ðŸ¥‰</div>
              <div class="kscore-tier-name">Bronze</div>
              <div class="kscore-tier-range">50-59</div>
            </div>
            <div class="kscore-tier" data-tier="silver" data-pos="52">
              <div class="kscore-tier-icon" style="color: var(--silver);">ðŸ¥ˆ</div>
              <div class="kscore-tier-name">Silver</div>
              <div class="kscore-tier-range">60-69</div>
            </div>
            <div class="kscore-tier" data-tier="gold" data-pos="64">
              <div class="kscore-tier-icon" style="color: var(--gold-tier);">ðŸ¥‡</div>
              <div class="kscore-tier-name">Gold</div>
              <div class="kscore-tier-range">70-79</div>
            </div>
            <div class="kscore-tier" data-tier="platinum" data-pos="76">
              <div class="kscore-tier-icon" style="color: var(--platinum);">ðŸ’ </div>
              <div class="kscore-tier-name">Platinum</div>
              <div class="kscore-tier-range">80-89</div>
            </div>
            <div class="kscore-tier" data-tier="diamond" data-pos="90">
              <div class="kscore-tier-icon" style="color: var(--diamond);">ðŸ’Ž</div>
              <div class="kscore-tier-name">Diamond</div>
              <div class="kscore-tier-range">90-99</div>
            </div>
          </div>
          <p style="text-align: center; color: var(--white-50); font-size: var(--text-xs); margin-top: var(--space-md);">
            Score 100 = native tokens only. Minimum Bronze (50) required for gas payment.
          </p>
        </div>
      </div>
    </section>

    <!-- E-SCORE -->
    <section id="escore">
      <div class="container">
        <div class="label reveal">Engagement Rewards</div>
        <h2 class="section-title reveal">E-Score: <span class="highlight">7 Dimensions</span></h2>

        <div class="escore-section reveal">
          <div class="escore-radar">
            <svg viewBox="0 0 300 300">
              <!-- Radar grid -->
              <g fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1">
                <polygon points="150,30 255,90 255,210 150,270 45,210 45,90" />
                <polygon points="150,60 225,105 225,195 150,240 75,195 75,105" />
                <polygon points="150,90 195,120 195,180 150,210 105,180 105,120" />
                <polygon points="150,120 165,135 165,165 150,180 135,165 135,135" />
              </g>
              <!-- Axes -->
              <g stroke="rgba(255,255,255,0.2)" stroke-width="1">
                <line x1="150" y1="150" x2="150" y2="30" />
                <line x1="150" y1="150" x2="255" y2="90" />
                <line x1="150" y1="150" x2="255" y2="210" />
                <line x1="150" y1="150" x2="150" y2="270" />
                <line x1="150" y1="150" x2="45" y2="210" />
                <line x1="150" y1="150" x2="45" y2="90" />
              </g>
              <!-- Data polygon -->
              <polygon
                id="escorePolygon"
                fill="rgba(201,162,39,0.2)"
                stroke="var(--gold)"
                stroke-width="2"
                points="150,60 210,105 195,180 150,220 90,170 75,110"
              />
              <!-- Dimension labels -->
              <text x="150" y="20" fill="var(--escore-time)" text-anchor="middle" font-size="11">TIME</text>
              <text x="270" y="90" fill="var(--escore-hold)" text-anchor="start" font-size="11">HOLD</text>
              <text x="270" y="210" fill="var(--escore-burn)" text-anchor="start" font-size="11">BURN</text>
              <text x="150" y="290" fill="var(--escore-use)" text-anchor="middle" font-size="11">USE</text>
              <text x="30" y="210" fill="var(--escore-build)" text-anchor="end" font-size="11">BUILD</text>
              <text x="30" y="90" fill="var(--escore-run)" text-anchor="end" font-size="11">RUN</text>
            </svg>
          </div>

          <div class="escore-dimensions">
            <div class="escore-dim">
              <div class="escore-dim-icon" style="background: var(--escore-hold);">ðŸ“Š</div>
              <div class="escore-dim-name">Hold</div>
              <div class="escore-dim-weight">Ï†Â²</div>
              <div class="escore-dim-bar"><div class="escore-dim-fill" style="width: 85%; background: var(--escore-hold);"></div></div>
            </div>
            <div class="escore-dim">
              <div class="escore-dim-icon" style="background: var(--escore-burn);">ðŸ”¥</div>
              <div class="escore-dim-name">Burn</div>
              <div class="escore-dim-weight">Ï†Â²</div>
              <div class="escore-dim-bar"><div class="escore-dim-fill" style="width: 72%; background: var(--escore-burn);"></div></div>
            </div>
            <div class="escore-dim">
              <div class="escore-dim-icon" style="background: var(--escore-use);">âš¡</div>
              <div class="escore-dim-name">Use (API)</div>
              <div class="escore-dim-weight">Ï†</div>
              <div class="escore-dim-bar"><div class="escore-dim-fill" style="width: 60%; background: var(--escore-use);"></div></div>
            </div>
            <div class="escore-dim">
              <div class="escore-dim-icon" style="background: var(--escore-build);">ðŸ› </div>
              <div class="escore-dim-name">Build (Apps)</div>
              <div class="escore-dim-weight">Ï†</div>
              <div class="escore-dim-bar"><div class="escore-dim-fill" style="width: 45%; background: var(--escore-build);"></div></div>
            </div>
            <div class="escore-dim">
              <div class="escore-dim-icon" style="background: var(--escore-run);">ðŸ–¥</div>
              <div class="escore-dim-name">Run (Nodes)</div>
              <div class="escore-dim-weight">Ï†</div>
              <div class="escore-dim-bar"><div class="escore-dim-fill" style="width: 30%; background: var(--escore-run);"></div></div>
            </div>
            <div class="escore-dim">
              <div class="escore-dim-icon" style="background: var(--escore-refer);">ðŸ”—</div>
              <div class="escore-dim-name">Refer</div>
              <div class="escore-dim-weight">1</div>
              <div class="escore-dim-bar"><div class="escore-dim-fill" style="width: 55%; background: var(--escore-refer);"></div></div>
            </div>
            <div class="escore-dim">
              <div class="escore-dim-icon" style="background: var(--escore-time);">â±</div>
              <div class="escore-dim-name">Time</div>
              <div class="escore-dim-weight">1</div>
              <div class="escore-dim-bar"><div class="escore-dim-fill" style="width: 90%; background: var(--escore-time);"></div></div>
            </div>
          </div>
        </div>

        <!-- Combined Discount Display -->
        <div class="discount-compare reveal">
          <div class="discount-option" id="holderDiscount">
            <div class="discount-source">Holder Tier</div>
            <div class="discount-value" id="holderDiscountValue">-67%</div>
            <div class="discount-badge">ðŸ’Ž Platinum</div>
          </div>
          <div class="discount-option active" id="escoreDiscount">
            <div class="discount-source">E-Score</div>
            <div class="discount-value" id="escoreDiscountValue">-78%</div>
            <div class="discount-badge">Score: 72</div>
          </div>
          <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; padding: var(--space-lg);">
            <div style="font-size: var(--text-xs); color: var(--white-50); margin-bottom: var(--space-xs);">Active</div>
            <div style="font-size: var(--text-xl); color: var(--gold);" id="activeDiscount">-78%</div>
            <div style="font-size: var(--text-xs); color: var(--gold); margin-top: var(--space-xs);">max(holder, e-score)</div>
          </div>
        </div>
      </div>
    </section>

    <!-- PHI FORMULAS REFERENCE -->
    <section id="formulas" style="padding: var(--space-2xl) 0;">
      <div class="container">
        <div class="label reveal">Code is Law</div>
        <h2 class="section-title reveal" style="text-align: center;">All Formulas - <span class="highlight">Ï†-Based</span></h2>
        <p class="body-text reveal" style="text-align: center; margin: 0 auto var(--space-xl); max-width: 700px;">
          Every calculation derives from the Golden Ratio (Ï† = 1.618033988749...).<br>
          <a href="https://github.com/zeyxx/GASdf/tree/main/src" target="_blank" style="color: var(--gold);">Verify in source code â†’</a>
        </p>

        <!-- DUAL BURN CHANNEL -->
        <div class="reveal" style="margin-bottom: var(--space-xl); padding: var(--space-lg); background: linear-gradient(135deg, rgba(255,107,53,0.1), rgba(201,162,39,0.1)); border-radius: 12px; border: 1px solid var(--white-10);">
          <h3 style="color: var(--white); margin-bottom: var(--space-md); text-align: center;">Dual Burn Channel</h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-lg); text-align: center;">
            <div>
              <div style="font-size: var(--text-2xl); color: var(--escore-burn); font-weight: 700;">100%</div>
              <div style="font-size: var(--text-sm); color: var(--white-70);">Pay with $asdfasdfa</div>
              <div style="font-size: var(--text-xs); color: var(--white-50);">Direct burn, no split</div>
            </div>
            <div style="display: flex; align-items: center; justify-content: center; color: var(--white-30);">or</div>
            <div>
              <div style="font-size: var(--text-2xl); color: var(--gold); font-weight: 700;">76.4% / 23.6%</div>
              <div style="font-size: var(--text-sm); color: var(--white-70);">Pay with other tokens</div>
              <div style="font-size: var(--text-xs); color: var(--white-50);">Burn / Treasury (1-1/Ï†Â³ / 1/Ï†Â³)</div>
            </div>
          </div>
        </div>

        <div class="reveal" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-lg);">

          <!-- Ecosystem Burn Bonus -->
          <div style="padding: var(--space-lg); background: rgba(0,0,0,0.4); border-radius: 8px; border-left: 3px solid var(--gold);">
            <h4 style="color: var(--gold); margin-bottom: var(--space-sm);">Ecosystem Burn Bonus</h4>
            <code style="display: block; background: rgba(255,255,255,0.05); padding: var(--space-sm); border-radius: 4px; font-size: var(--text-sm); margin-bottom: var(--space-sm); font-family: monospace;">
              bonus = (1/Ï†Â²) Ã— (1 - Ï†<sup>-b/30</sup>)
            </code>
            <div style="font-size: var(--text-xs); color: var(--white-50); margin-top: var(--space-sm);">
              <strong>b</strong> = token's self-burn %<br>
              <strong>Max</strong> = 1/Ï†Â² = 38.2% (at b â‰¥ 30%)
            </div>
            <p style="font-size: var(--text-xs); color: var(--white-30); margin-top: var(--space-xs);">
              <em>holdex.js:216</em>
            </p>
          </div>

          <!-- E-Score Discount -->
          <div style="padding: var(--space-lg); background: rgba(0,0,0,0.4); border-radius: 8px; border-left: 3px solid var(--escore-hold);">
            <h4 style="color: var(--escore-hold); margin-bottom: var(--space-sm);">E-Score Discount</h4>
            <code style="display: block; background: rgba(255,255,255,0.05); padding: var(--space-sm); border-radius: 4px; font-size: var(--text-sm); margin-bottom: var(--space-sm); font-family: monospace;">
              discount = 1 - Ï†<sup>-E/25</sup>
            </code>
            <div style="font-size: var(--text-xs); color: var(--white-50); margin-top: var(--space-sm);">
              <strong>E</strong> = weighted sum of 7 dimensions<br>
              <strong>Cap</strong> = 95% (0.95)
            </div>
            <p style="font-size: var(--text-xs); color: var(--white-30); margin-top: var(--space-xs);">
              <em>harmony.js:130</em>
            </p>
          </div>

          <!-- Holder Discount -->
          <div style="padding: var(--space-lg); background: rgba(0,0,0,0.4); border-radius: 8px; border-left: 3px solid var(--diamond);">
            <h4 style="color: var(--diamond); margin-bottom: var(--space-sm);">Holder Discount</h4>
            <code style="display: block; background: rgba(255,255,255,0.05); padding: var(--space-sm); border-radius: 4px; font-size: var(--text-sm); margin-bottom: var(--space-sm); font-family: monospace;">
              discount = (logâ‚â‚€(share) + 5) / 3
            </code>
            <div style="font-size: var(--text-xs); color: var(--white-50); margin-top: var(--space-sm);">
              <strong>share</strong> = balance / circulating supply<br>
              <strong>Cap</strong> = 95% (0.95)
            </div>
            <p style="font-size: var(--text-xs); color: var(--white-30); margin-top: var(--space-xs);">
              <em>holder-tiers.js:151</em>
            </p>
          </div>

          <!-- Combined Discount -->
          <div style="padding: var(--space-lg); background: rgba(0,0,0,0.4); border-radius: 8px; border-left: 3px solid var(--platinum);">
            <h4 style="color: var(--platinum); margin-bottom: var(--space-sm);">Active Discount</h4>
            <code style="display: block; background: rgba(255,255,255,0.05); padding: var(--space-sm); border-radius: 4px; font-size: var(--text-sm); margin-bottom: var(--space-sm); font-family: monospace;">
              active = max(holder, escore)
            </code>
            <div style="font-size: var(--text-xs); color: var(--white-50); margin-top: var(--space-sm);">
              Best of both applied automatically<br>
              <strong>Cap</strong> = 95% (prevents negative fees)
            </div>
            <p style="font-size: var(--text-xs); color: var(--white-30); margin-top: var(--space-xs);">
              <em>holder-tiers.js:278</em>
            </p>
          </div>

        </div>

        <!-- Holder Tiers Table -->
        <div class="reveal" style="margin-top: var(--space-xl); overflow-x: auto;">
          <h3 style="color: var(--white); margin-bottom: var(--space-md); text-align: center;">Holder Tiers</h3>
          <table style="width: 100%; max-width: 500px; margin: 0 auto; border-collapse: collapse; font-size: var(--text-sm);">
            <thead>
              <tr style="border-bottom: 1px solid var(--white-10);">
                <th style="padding: var(--space-sm); text-align: left; color: var(--white-50);">Tier</th>
                <th style="padding: var(--space-sm); text-align: right; color: var(--white-50);">Min Share</th>
                <th style="padding: var(--space-sm); text-align: right; color: var(--white-50);">Discount</th>
              </tr>
            </thead>
            <tbody>
              <tr><td style="padding: var(--space-sm);"><span style="color: var(--diamond);">ðŸ’Ž</span> Diamond</td><td style="text-align: right;">â‰¥ 1%</td><td style="text-align: right; color: var(--escore-burn);">95%</td></tr>
              <tr><td style="padding: var(--space-sm);"><span style="color: var(--platinum);">ðŸ’ </span> Platinum</td><td style="text-align: right;">â‰¥ 0.1%</td><td style="text-align: right;">67%</td></tr>
              <tr><td style="padding: var(--space-sm);"><span style="color: var(--gold-tier);">ðŸ¥‡</span> Gold</td><td style="text-align: right;">â‰¥ 0.01%</td><td style="text-align: right;">33%</td></tr>
              <tr><td style="padding: var(--space-sm);"><span style="color: var(--silver);">ðŸ¥ˆ</span> Silver</td><td style="text-align: right;">â‰¥ 0.001%</td><td style="text-align: right;">0%</td></tr>
              <tr><td style="padding: var(--space-sm);"><span style="color: var(--bronze);">ðŸ¥‰</span> Bronze</td><td style="text-align: right;">Any</td><td style="text-align: right;">0%</td></tr>
            </tbody>
          </table>
          <p style="font-size: var(--text-xs); color: var(--white-30); text-align: center; margin-top: var(--space-sm);">
            <em>holder-tiers.js:334</em>
          </p>
        </div>

        <!-- E-Score Dimensions -->
        <div class="reveal" style="margin-top: var(--space-xl);">
          <h3 style="color: var(--white); margin-bottom: var(--space-md); text-align: center;">E-Score Dimensions (Ï†-weighted)</h3>
          <div style="display: flex; flex-wrap: wrap; gap: var(--space-sm); justify-content: center;">
            <span style="padding: 4px 12px; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: var(--text-xs);">ðŸ“Š Hold <strong>0.382</strong></span>
            <span style="padding: 4px 12px; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: var(--text-xs);">ðŸ”¥ Burn <strong>0.382</strong></span>
            <span style="padding: 4px 12px; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: var(--text-xs);">âš¡ Use <strong>0.236</strong></span>
            <span style="padding: 4px 12px; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: var(--text-xs);">ðŸ›  Build <strong>0.146</strong></span>
            <span style="padding: 4px 12px; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: var(--text-xs);">ðŸ–¥ Node <strong>0.090</strong></span>
            <span style="padding: 4px 12px; background: rgba(255,255,255,0.05); border-radius: 20px; font-size: var(--text-xs);">ðŸ”— Refer <strong>0.056</strong></span>
          </div>
          <p style="font-size: var(--text-xs); color: var(--white-30); text-align: center; margin-top: var(--space-sm);">
            <em>harmony.js:38-46</em>
          </p>
        </div>

      </div>
    </section>

    <!-- CTA -->
    <section id="cta">
      <div class="container">
        <h2 class="section-title reveal" style="text-align: center;">Start <span class="highlight">building</span></h2>
        <p class="body-text reveal" style="text-align: center; margin: var(--space-md) auto 0;">
          Integrate GASdf in your app. Let users pay gas with any token.
        </p>

        <div class="cta-grid reveal">
          <button class="cta-btn cta-btn-primary" onclick="document.getElementById('try').scrollIntoView({behavior:'smooth'})">Try the Apps</button>
          <a href="https://github.com/zeyxx/GASdf" target="_blank" class="cta-btn cta-btn-secondary">GitHub</a>
          <a href="https://alonisthe.dev/holdex" target="_blank" class="cta-btn cta-btn-secondary">HolDex API</a>
        </div>
      </div>
    </section>

    <footer class="reveal">
      <div class="footer-links">
        <a href="https://github.com/zeyxx/GASdf" target="_blank">GitHub</a>
        <a href="https://x.com/asdfasdfa_" target="_blank">X</a>
        <a href="https://alonisthe.dev/holdex" target="_blank">HolDex</a>
      </div>
      <div class="footer-copy">Built on Solana. Powered by Ï†.</div>
    </footer>
  </div>

  <!-- Burn Stats Modal (Black Hole Tap) -->
  <div class="burn-modal" id="burnModal">
    <button class="burn-modal-close" id="burnModalClose">âœ•</button>
    <div class="burn-modal-content">
      <div class="burn-modal-icon">ðŸ”¥</div>
      <div class="burn-modal-title">Eternal Burn Stats</div>
      <div class="burn-stat-row">
        <span class="burn-stat-label">Total Burned</span>
        <span class="burn-stat-value flame" id="modalBurnTotal">Loading...</span>
      </div>
      <div class="burn-stat-row">
        <span class="burn-stat-label">Burn Rate</span>
        <span class="burn-stat-value" id="modalBurnRate">76.4%</span>
      </div>
      <div class="burn-stat-row">
        <span class="burn-stat-label">Treasury Rate</span>
        <span class="burn-stat-value" id="modalTreasuryRate">23.6%</span>
      </div>
      <div class="burn-stat-row">
        <span class="burn-stat-label">Total Txs</span>
        <span class="burn-stat-value flame" id="modalBurn24h">-</span>
      </div>
      <div class="burn-stat-row">
        <span class="burn-stat-label">Burn Flywheel</span>
        <span class="burn-stat-value" id="modalSupplyBurned">-</span>
      </div>
    </div>
  </div>

  <!-- Wallet Connect Modal -->
  <div class="wallet-modal" id="walletModal">
    <div class="wallet-modal-content">
      <div class="wallet-modal-header">
        <span class="wallet-modal-title" id="walletModalTitle">Connect Wallet</span>
        <button class="wallet-modal-close" id="walletModalClose">âœ•</button>
      </div>

      <!-- Wallet Options (shown when not connected) -->
      <div class="wallet-options-list" id="walletOptions">
        <button class="wallet-option" id="phantomBtn">
          <div class="wallet-option-icon phantom">ðŸ‘»</div>
          <div class="wallet-option-info">
            <div class="wallet-option-name">Phantom</div>
            <div class="wallet-option-status" id="phantomStatus">Checking...</div>
          </div>
          <span class="wallet-option-arrow">â†’</span>
        </button>
        <button class="wallet-option" id="solflareBtn">
          <div class="wallet-option-icon solflare">â˜€ï¸</div>
          <div class="wallet-option-info">
            <div class="wallet-option-name">Solflare</div>
            <div class="wallet-option-status" id="solflareStatus">Checking...</div>
          </div>
          <span class="wallet-option-arrow">â†’</span>
        </button>
      </div>

      <!-- Connected State (shown when connected) -->
      <div class="wallet-connected-view" id="walletConnected" style="display: none;">
        <div class="wallet-connected-header">
          <div class="wallet-connected-icon">âœ“</div>
        </div>
        <div class="wallet-address-display" id="walletAddress">Loading...</div>
        <div class="wallet-stats-grid">
          <div class="wallet-stat-card">
            <div class="wallet-stat-label">$ASDF Balance</div>
            <div class="wallet-stat-value" id="userAsdfBalance">---</div>
          </div>
          <div class="wallet-stat-card">
            <div class="wallet-stat-label">Holder Tier</div>
            <div class="wallet-stat-value gold" id="userHolderTier">---</div>
          </div>
          <div class="wallet-stat-card full-width">
            <div class="wallet-stat-label">Your Fee Discount</div>
            <div class="wallet-stat-value gold" id="userDiscount">---</div>
          </div>
        </div>
        <button class="wallet-disconnect-btn" id="disconnectBtn">Disconnect Wallet</button>
      </div>
    </div>
  </div>

  <!-- Jupiter Plugin (RPC-less swap widget) -->
  <script src="https://plugin.jup.ag/plugin-v1.js" data-preload defer></script>

  <!-- Three.js Import Map -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
    }
  }
  </script>

  <script type="module">
    import * as THREE from 'three';
    import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
    import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
    import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

    // ========================================================================
    // GOLDEN RATIO CONSTANTS
    // ========================================================================
    const PHI = 1.618033988749894;
    const PHI_CUBED = PHI * PHI * PHI;
    const BURN_RATE = 1 - (1 / PHI_CUBED);
    const TREASURY_RATE = 1 / PHI_CUBED;
    const ECOSYSTEM_BONUS = 1 / (PHI * PHI);

    // ========================================================================
    // SPACE RENDERER - Full version with all effects
    // Stars, Milky Way, Nebulae, Cosmic Dust, Lorenz Comets
    // ========================================================================
    class SpaceRenderer {
      constructor(container) {
        this.container = container;
        this.time = 0;
        this.scrollY = 0;
        this.targetScrollY = 0;
        this.scrollProgress = 0;

        // Mobile detection - reduce particles by 50%
        this.isMobile = window.innerWidth < 768 || /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        this.particleMultiplier = this.isMobile ? 0.5 : 1.0;

        // Mouse parallax - wider movement
        this.mouseX = 0;
        this.mouseY = 0;
        this.targetMouseX = 0;
        this.targetMouseY = 0;

        this.init();
        this.createStars();
        this.createMilkyWay();
        this.createNebulae();
        this.createCosmicDust();
        this.createComets();
        this.setupPostProcessing();
        this.animate();
        this.setupEventListeners();
      }

      init() {
        this.scene = new THREE.Scene();
        this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);
        this.camera.position.z = 5;

        this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, powerPreference: 'high-performance' });
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        this.renderer.setClearColor(0x000000, 1);
        this.container.appendChild(this.renderer.domElement);
      }

      // Stars with Harvard spectral classification
      createStars() {
        const spectralColors = [
          new THREE.Color(0x9bb0ff), new THREE.Color(0xaabfff), new THREE.Color(0xcad7ff),
          new THREE.Color(0xf8f7ff), new THREE.Color(0xfff4e8), new THREE.Color(0xffd2a1), new THREE.Color(0xffbb7b)
        ];
        const spectralProbs = [0.00003, 0.0013, 0.006, 0.03, 0.076, 0.121, 0.765];

        // Mobile: 50% particles for performance
        const starCount = Math.floor(12000 * this.particleMultiplier);
        const positions = new Float32Array(starCount * 3);
        const colors = new Float32Array(starCount * 3);
        const sizes = new Float32Array(starCount);
        const brightness = new Float32Array(starCount);

        for (let i = 0; i < starCount; i++) {
          const i3 = i * 3;
          const theta = Math.random() * Math.PI * 2;
          const phi = Math.acos(2 * Math.random() - 1);
          const radius = 400 + Math.random() * 1200;

          const galacticConcentration = Math.exp(-Math.abs(phi - Math.PI/2) * 2);
          const r = radius * (0.5 + 0.5 * galacticConcentration);

          positions[i3] = r * Math.sin(phi) * Math.cos(theta);
          positions[i3 + 1] = r * Math.sin(phi) * Math.sin(theta);
          positions[i3 + 2] = r * Math.cos(phi);

          let rand = Math.random(), cumulative = 0, spectralIndex = 6;
          for (let j = 0; j < spectralProbs.length; j++) {
            cumulative += spectralProbs[j];
            if (rand < cumulative) { spectralIndex = j; break; }
          }

          const color = spectralColors[spectralIndex];
          colors[i3] = color.r;
          colors[i3 + 1] = color.g;
          colors[i3 + 2] = color.b;

          const magRand = Math.random();
          let magnitude = magRand < 0.002 ? Math.random() : magRand < 0.02 ? 1 + Math.random() : magRand < 0.1 ? 2 + Math.random() : magRand < 0.3 ? 3 + Math.random() : 4 + Math.random() * 2;
          sizes[i] = magnitude < 1 ? 3.0 : magnitude < 2 ? 2.0 : magnitude < 3 ? 1.3 : 0.7;
          brightness[i] = Math.pow(2.512, (5 - magnitude) / 2.5);
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
        geometry.setAttribute('brightness', new THREE.BufferAttribute(brightness, 1));

        const material = new THREE.ShaderMaterial({
          uniforms: { time: { value: 0 }, pixelRatio: { value: this.renderer.getPixelRatio() } },
          vertexShader: `
            attribute float size;
            attribute float brightness;
            varying vec3 vColor;
            varying float vBrightness;
            uniform float time;
            uniform float pixelRatio;
            void main() {
              vColor = color;
              vBrightness = brightness;
              vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
              float sizeVar = 1.0 + sin(time * 0.2 + position.x * 0.01) * 0.08;
              gl_PointSize = size * sizeVar * pixelRatio * (250.0 / -mvPosition.z);
              gl_Position = projectionMatrix * mvPosition;
            }
          `,
          fragmentShader: `
            varying vec3 vColor;
            varying float vBrightness;
            void main() {
              vec2 uv = gl_PointCoord - 0.5;
              float dist = length(uv);
              float core = exp(-dist * 5.0);
              float glow = exp(-dist * 2.0) * 0.25;
              float alpha = (core + glow) * vBrightness;
              gl_FragColor = vec4(vColor, clamp(alpha, 0.0, 1.0));
            }
          `,
          transparent: true,
          vertexColors: true,
          depthWrite: false,
          blending: THREE.AdditiveBlending
        });

        this.stars = new THREE.Points(geometry, material);
        this.scene.add(this.stars);
      }

      // Milky Way particle cloud - INTENSIFIED
      createMilkyWay() {
        // Mobile: 50% particles for performance
        const particleCount = Math.floor(10000 * this.particleMultiplier);
        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);
        const sizes = new Float32Array(particleCount);
        const alphas = new Float32Array(particleCount);

        for (let i = 0; i < particleCount; i++) {
          const i3 = i * 3;
          const x = (Math.random() - 0.5) * 3000;
          const ySpread = 80 + Math.random() * 120;
          const y = (Math.random() - 0.5) * ySpread * (0.3 + Math.random() * 0.7);
          const z = -400 - Math.random() * 800;

          positions[i3] = x;
          positions[i3 + 1] = y;
          positions[i3 + 2] = z;

          // Warmer, more vivid colors
          const warmth = 0.88 + Math.random() * 0.12;
          colors[i3] = warmth;
          colors[i3 + 1] = warmth * 0.93;
          colors[i3 + 2] = warmth * 0.75;

          sizes[i] = 1.5 + Math.random() * 3.0;
          const distFromCenter = Math.abs(y) / 100;
          // Intensified alpha: 2.5x brighter
          alphas[i] = (1 - distFromCenter) * (0.035 + Math.random() * 0.045);
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
        geometry.setAttribute('alpha', new THREE.BufferAttribute(alphas, 1));

        const material = new THREE.ShaderMaterial({
          uniforms: { time: { value: 0 } },
          vertexShader: `
            attribute float size;
            attribute float alpha;
            varying vec3 vColor;
            varying float vAlpha;
            uniform float time;
            void main() {
              vColor = color;
              vAlpha = alpha;
              vec3 pos = position;
              pos.x += sin(time * 0.08 + position.z * 0.008) * 1.5;
              pos.y += cos(time * 0.06 + position.x * 0.008) * 0.8;
              vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
              gl_PointSize = size * (350.0 / -mvPosition.z);
              gl_Position = projectionMatrix * mvPosition;
            }
          `,
          fragmentShader: `
            varying vec3 vColor;
            varying float vAlpha;
            void main() {
              vec2 center = gl_PointCoord - 0.5;
              float dist = length(center);
              float alpha = smoothstep(0.5, 0.0, dist) * vAlpha;
              gl_FragColor = vec4(vColor, alpha);
            }
          `,
          transparent: true,
          vertexColors: true,
          depthWrite: false,
          blending: THREE.AdditiveBlending
        });

        this.milkyWay = new THREE.Points(geometry, material);
        this.milkyWay.rotation.z = -12 * Math.PI / 180;
        this.scene.add(this.milkyWay);
      }

      // Nebulae with FBM noise
      createNebulae() {
        this.nebulae = [];
        const configs = [
          { x: -350, y: 180, z: -550, size: 280, color: new THREE.Color(0x4466aa), opacity: 0.035 },
          { x: 450, y: -130, z: -650, size: 230, color: new THREE.Color(0x884488), opacity: 0.03 },
          { x: -180, y: -280, z: -450, size: 180, color: new THREE.Color(0xaa4455), opacity: 0.025 },
          { x: 280, y: 350, z: -800, size: 320, color: new THREE.Color(0x446688), opacity: 0.02 },
        ];

        const geometry = new THREE.PlaneGeometry(1, 1);

        configs.forEach(cfg => {
          const material = new THREE.ShaderMaterial({
            uniforms: { time: { value: 0 }, baseColor: { value: cfg.color }, opacity: { value: cfg.opacity } },
            vertexShader: `varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }`,
            fragmentShader: `
              uniform float time;
              uniform vec3 baseColor;
              uniform float opacity;
              varying vec2 vUv;
              float hash(vec2 p) { return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453); }
              float noise(vec2 p) {
                vec2 i = floor(p), f = fract(p);
                f = f * f * (3.0 - 2.0 * f);
                return mix(mix(hash(i), hash(i + vec2(1,0)), f.x), mix(hash(i + vec2(0,1)), hash(i + vec2(1,1)), f.x), f.y);
              }
              float fbm(vec2 p) {
                float v = 0.0, a = 0.5;
                for (int i = 0; i < 5; i++) { v += a * noise(p); p *= 2.0; a *= 0.5; }
                return v;
              }
              void main() {
                vec2 uv = vUv - 0.5;
                float dist = length(uv);
                float falloff = pow(1.0 - smoothstep(0.0, 0.5, dist), 1.5);
                float structure = fbm(uv * 3.0 + time * 0.015) * 0.5 + fbm(uv * 6.0 - time * 0.01) * 0.3 + fbm(uv * 9.0 + time * 0.008) * 0.2;
                vec3 color = baseColor + vec3(structure * 0.15);
                gl_FragColor = vec4(color, falloff * structure * opacity);
              }
            `,
            transparent: true,
            side: THREE.DoubleSide,
            depthWrite: false,
            blending: THREE.AdditiveBlending
          });

          const nebula = new THREE.Mesh(geometry, material);
          nebula.scale.set(cfg.size, cfg.size, 1);
          nebula.position.set(cfg.x, cfg.y, cfg.z);
          nebula.userData.baseX = cfg.x;
          nebula.userData.baseY = cfg.y;
          nebula.userData.baseZ = cfg.z;
          this.nebulae.push(nebula);
          this.scene.add(nebula);
        });
      }

      // Cosmic dust particles
      createCosmicDust() {
        // Mobile: 50% particles for performance
        const dustCount = Math.floor(1500 * this.particleMultiplier);
        const positions = new Float32Array(dustCount * 3);
        const velocities = new Float32Array(dustCount * 3);

        for (let i = 0; i < dustCount; i++) {
          const i3 = i * 3;
          positions[i3] = (Math.random() - 0.5) * 180;
          positions[i3 + 1] = (Math.random() - 0.5) * 180;
          positions[i3 + 2] = (Math.random() - 0.5) * 180;
          velocities[i3] = (Math.random() - 0.5) * 0.015;
          velocities[i3 + 1] = (Math.random() - 0.5) * 0.015;
          velocities[i3 + 2] = (Math.random() - 0.5) * 0.015;
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('velocity', new THREE.BufferAttribute(velocities, 3));

        const material = new THREE.ShaderMaterial({
          uniforms: { time: { value: 0 }, scrollOffset: { value: 0 } },
          vertexShader: `
            attribute vec3 velocity;
            uniform float time;
            uniform float scrollOffset;
            varying float vAlpha;
            void main() {
              vec3 pos = position + velocity * time * 8.0;
              pos.y += scrollOffset * 0.03;
              pos = mod(pos + 90.0, 180.0) - 90.0;
              vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
              vAlpha = 0.25 * (1.0 - smoothstep(10.0, 90.0, -mvPosition.z));
              gl_PointSize = 1.2 * (40.0 / -mvPosition.z);
              gl_Position = projectionMatrix * mvPosition;
            }
          `,
          fragmentShader: `
            varying float vAlpha;
            void main() {
              float dist = length(gl_PointCoord - 0.5);
              float alpha = (1.0 - smoothstep(0.0, 0.5, dist)) * vAlpha;
              gl_FragColor = vec4(0.85, 0.8, 0.75, alpha);
            }
          `,
          transparent: true,
          depthWrite: false,
          blending: THREE.AdditiveBlending
        });

        this.cosmicDust = new THREE.Points(geometry, material);
        this.scene.add(this.cosmicDust);
      }

      // ========================================================================
      // GOLDEN RATIO COMETS - Mathematically perfect psychological harmony
      // Based on Ï† (1.618...), Fibonacci, Z-pattern reading, Rule of Thirds
      // ========================================================================
      createComets() {
        this.cometPool = [];

        // Golden ratio constants
        const PHI_INV = 1 / PHI;
        const PHI_SQ = PHI * PHI;
        const PHI_INV_SQ = 1 / PHI_SQ;

        // Rule of thirds intersections
        const THIRD = 1/3;
        const TWO_THIRD = 2/3;

        // Fibonacci timing sequence (seconds)
        const FIB = [1, 1, 2, 3, 5, 8, 13];

        this.cometConfig = {
          tailSegments: 65,
          lorenz: { sigma: 10, rho: 28, beta: 8/3 },
        };

        // Mathematically balanced paths using golden ratio
        this.strategicPaths = [
          { trigger: 0, startX: PHI_INV, startY: PHI_INV, targetX: 0, targetY: -PHI_INV_SQ, depth: -350, speed: PHI_INV, respawnDelay: FIB[5] * 1000 },
          { trigger: PHI_INV_SQ * 0.3, startX: -PHI_INV, startY: THIRD, targetX: -PHI_INV_SQ, targetY: -THIRD, depth: -480, speed: PHI_INV_SQ, respawnDelay: FIB[6] * 1000 },
          { trigger: PHI_INV_SQ, startX: TWO_THIRD, startY: PHI_INV_SQ, targetX: THIRD, targetY: -PHI_INV, depth: -400, speed: PHI_INV * 1.1, respawnDelay: FIB[4] * 2000 },
          { trigger: PHI_INV, startX: -TWO_THIRD, startY: PHI_INV_SQ, targetX: THIRD, targetY: -PHI_INV_SQ, depth: -360, speed: PHI_INV, respawnDelay: FIB[5] * 1200 },
          { trigger: 1 - PHI_INV, startX: PHI_INV + 0.1, startY: 0, targetX: -PHI_INV, targetY: -THIRD * 0.5, depth: -380, speed: PHI_INV_SQ * 1.5, respawnDelay: FIB[5] * 1400 },
          { trigger: PHI_INV + PHI_INV_SQ * 0.5, startX: -PHI_INV_SQ, startY: PHI_INV, targetX: PHI_INV_SQ, targetY: -PHI_INV, depth: -420, speed: PHI_INV_SQ, respawnDelay: FIB[6] * 1000 },
          { trigger: 1 - PHI_INV_SQ, startX: PHI_INV, startY: PHI_INV, targetX: 0, targetY: 0, depth: -300, speed: PHI_INV * 1.3, respawnDelay: FIB[4] * 1200 },
          { trigger: THIRD, startX: -1, startY: PHI_INV_SQ, targetX: 1, targetY: -PHI_INV_SQ, depth: -600, speed: PHI_INV_SQ * 0.4, respawnDelay: FIB[6] * 1500 }
        ];

        this.strategicPaths.forEach((path, i) => {
          const comet = this.createStrategicComet(i, path);
          this.cometPool.push(comet);
          this.scene.add(comet.mesh);
        });

        this.spawnedComets = new Set();
      }

      createStrategicComet(index, path) {
        const cfg = this.cometConfig;

        const positions = new Float32Array(cfg.tailSegments * 3);
        const alphas = new Float32Array(cfg.tailSegments);
        const sizes = new Float32Array(cfg.tailSegments);

        for (let i = 0; i < cfg.tailSegments; i++) {
          positions[i * 3] = -99999;
          positions[i * 3 + 1] = -99999;
          positions[i * 3 + 2] = -99999;

          const t = i / cfg.tailSegments;
          alphas[i] = Math.pow(1 - t, 2.5) * 0.5;
          sizes[i] = i === 0 ? 0.6 : (1 - Math.pow(t, 0.6)) * 2.0 + 0.15;
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('alpha', new THREE.BufferAttribute(alphas, 1));
        geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

        const hue = 0.12 + (index * 0.618033988749 * 0.08) % 0.1;
        const color = new THREE.Color().setHSL(hue, 0.25, 0.9);

        const material = new THREE.ShaderMaterial({
          uniforms: {
            baseColor: { value: color },
            pixelRatio: { value: Math.min(window.devicePixelRatio, 2) }
          },
          vertexShader: `
            attribute float alpha;
            attribute float size;
            varying float vAlpha;
            uniform float pixelRatio;
            void main() {
              vAlpha = alpha;
              vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
              if (position.x < -9999.0) {
                gl_PointSize = 0.0;
              } else {
                gl_PointSize = size * pixelRatio * (300.0 / max(-mvPosition.z, 1.0));
              }
              gl_Position = projectionMatrix * mvPosition;
            }
          `,
          fragmentShader: `
            uniform vec3 baseColor;
            varying float vAlpha;
            void main() {
              if (vAlpha < 0.01) discard;
              vec2 uv = gl_PointCoord - 0.5;
              float dist = length(uv);
              float core = exp(-dist * 12.0);
              float halo = exp(-dist * 4.0) * 0.15;
              float brightness = (core + halo) * vAlpha;
              if (brightness < 0.005) discard;
              gl_FragColor = vec4(baseColor, brightness);
            }
          `,
          transparent: true,
          depthWrite: false,
          blending: THREE.AdditiveBlending
        });

        const mesh = new THREE.Points(geometry, material);
        mesh.frustumCulled = false;

        return {
          mesh,
          geometry,
          path,
          active: false,
          lorenz: { x: 0, y: 0, z: 0 },
          progress: 0,
          trail: [],
          life: 0,
          lastSpawn: -99999
        };
      }

      spawnStrategicComet(comet, now) {
        const path = comet.path;

        const seed = path.startX * 10 + path.startY * 7 + now * 0.0001;
        comet.lorenz = {
          x: 1 + Math.sin(seed) * 0.3,
          y: 1 + Math.cos(seed * PHI) * 0.3,
          z: 1 + Math.sin(seed * PHI * PHI) * 0.3
        };

        const aspect = window.innerWidth / window.innerHeight;
        const isMobile = window.innerWidth < 768;
        const isPortrait = aspect < 1;

        const scaleX = isPortrait ? 100 : 180 * Math.min(aspect, 1.8);
        const scaleY = isPortrait ? 150 : 120;

        const mobileCenter = isMobile ? 0.3 : 0;

        comet.startWorld = {
          x: (path.startX * (1 - mobileCenter)) * scaleX,
          y: path.startY * scaleY
        };
        comet.targetWorld = {
          x: (path.targetX * (1 - mobileCenter * 0.5)) * scaleX,
          y: path.targetY * scaleY
        };

        comet.progress = 0;
        comet.trail = [];
        comet.life = 0;
        comet.active = true;
        comet.lastSpawn = now;
      }

      updateComets() {
        const cfg = this.cometConfig;
        const now = performance.now();

        this.cometPool.forEach((comet) => {
          const path = comet.path;

          const shouldTrigger = this.scrollProgress >= path.trigger &&
                                this.scrollProgress < path.trigger + 0.3;

          if (shouldTrigger && !comet.active) {
            if (now - comet.lastSpawn > path.respawnDelay) {
              this.spawnStrategicComet(comet, now);
            }
          }

          if (!comet.active) return;

          // Advance Lorenz for chaos overlay
          const dt = 0.006;
          comet.lorenz = this.lorenzStep(comet.lorenz, dt, cfg.lorenz);

          comet.progress += 0.004 * path.speed;

          const eased = 1 - Math.pow(1 - Math.min(comet.progress, 1), 2.5);

          const chaosScale = 3 * (1 - eased);
          const baseX = comet.startWorld.x + (comet.targetWorld.x - comet.startWorld.x) * eased;
          const baseY = comet.startWorld.y + (comet.targetWorld.y - comet.startWorld.y) * eased;

          const worldPos = new THREE.Vector3(
            baseX + (comet.lorenz.x - 10) * chaosScale,
            baseY + (comet.lorenz.y - 15) * chaosScale + this.scrollProgress * -80,
            path.depth + (comet.lorenz.z - 25) * 0.5
          );

          comet.trail.unshift(worldPos);
          if (comet.trail.length > cfg.tailSegments) {
            comet.trail.pop();
          }

          const positions = comet.geometry.attributes.position.array;
          for (let i = 0; i < cfg.tailSegments; i++) {
            if (i < comet.trail.length) {
              positions[i * 3] = comet.trail[i].x;
              positions[i * 3 + 1] = comet.trail[i].y;
              positions[i * 3 + 2] = comet.trail[i].z;
            }
          }
          comet.geometry.attributes.position.needsUpdate = true;

          comet.life++;
          if (comet.progress > 1.2 || comet.life > 600) {
            comet.active = false;
            for (let i = 0; i < cfg.tailSegments * 3; i++) {
              positions[i] = -99999;
            }
            comet.geometry.attributes.position.needsUpdate = true;
          }
        });
      }

      // Lorenz attractor step
      lorenzStep(state, dt, params) {
        const { sigma, rho, beta } = params;
        return {
          x: state.x + sigma * (state.y - state.x) * dt,
          y: state.y + (state.x * (rho - state.z) - state.y) * dt,
          z: state.z + (state.x * state.y - beta * state.z) * dt
        };
      }

      setupPostProcessing() {
        this.composer = new EffectComposer(this.renderer);
        this.composer.addPass(new RenderPass(this.scene, this.camera));
        // Reduced bloom: strength 0.12 (was 0.2), radius 0.2 (was 0.3) - more subtle
        this.bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 0.12, 0.2, 0.8);
        this.composer.addPass(this.bloomPass);
      }

      animate() {
        requestAnimationFrame(() => this.animate());
        this.time += 0.016;

        this.scrollY += (this.targetScrollY - this.scrollY) * 0.06;
        const maxScroll = Math.max(1, document.body.scrollHeight - window.innerHeight);
        this.scrollProgress = this.scrollY / maxScroll;

        this.mouseX += (this.targetMouseX - this.mouseX) * 0.04;
        this.mouseY += (this.targetMouseY - this.mouseY) * 0.04;

        const cameraZ = 5 - this.scrollProgress * 300;
        const cameraY = -this.scrollProgress * 150;

        // Reduced mouse parallax (was 60/25 - now 30/12 for subtler effect)
        const mouseParallaxX = this.mouseX * 30;
        const mouseParallaxY = this.mouseY * 12;

        this.camera.position.z = cameraZ;
        this.camera.position.y = cameraY + mouseParallaxY;
        this.camera.position.x = mouseParallaxX;

        // Stars follow but lag (distant)
        if (this.stars) {
          this.stars.material.uniforms.time.value = this.time;
          this.stars.position.x = mouseParallaxX * 0.15;
          this.stars.position.y = cameraY * 0.4 + mouseParallaxY * 0.1;
          this.stars.position.z = cameraZ * 0.3;
          this.stars.rotation.y = this.time * 0.001;
        }

        // Milky Way (very distant)
        if (this.milkyWay) {
          this.milkyWay.material.uniforms.time.value = this.time;
          this.milkyWay.position.x = mouseParallaxX * 0.08;
          this.milkyWay.position.y = cameraY * 0.15 + mouseParallaxY * 0.05;
          this.milkyWay.position.z = cameraZ * 0.1;
        }

        // Nebulae at different depths
        if (this.nebulae) {
          this.nebulae.forEach((nebula, i) => {
            nebula.material.uniforms.time.value = this.time;
            const depth = 0.2 + i * 0.12;
            nebula.position.x = nebula.userData.baseX + mouseParallaxX * (0.1 + i * 0.08);
            nebula.position.y = nebula.userData.baseY + cameraY * depth + mouseParallaxY * (0.08 + i * 0.04);
            nebula.position.z = nebula.userData.baseZ + cameraZ * depth * 0.4;
            nebula.lookAt(this.camera.position);
          });
        }

        // Cosmic dust (close, fast parallax)
        if (this.cosmicDust) {
          this.cosmicDust.material.uniforms.time.value = this.time;
          this.cosmicDust.material.uniforms.scrollOffset.value = this.scrollProgress * 400;
          this.cosmicDust.position.x = mouseParallaxX * 0.6;
          this.cosmicDust.position.y = cameraY * 0.85 + mouseParallaxY * 0.4;
          this.cosmicDust.position.z = cameraZ * 0.8;
        }

        this.updateComets();
        this.composer.render();
      }

      setupEventListeners() {
        window.addEventListener('scroll', () => { this.targetScrollY = window.scrollY; }, { passive: true });

        window.addEventListener('mousemove', (e) => {
          this.targetMouseX = (e.clientX / window.innerWidth - 0.5) * 2;
          this.targetMouseY = (e.clientY / window.innerHeight - 0.5) * 2;
        }, { passive: true });

        window.addEventListener('touchmove', (e) => {
          if (e.touches.length > 0) {
            this.targetMouseX = (e.touches[0].clientX / window.innerWidth - 0.5) * 2;
            this.targetMouseY = (e.touches[0].clientY / window.innerHeight - 0.5) * 2;
          }
        }, { passive: true });

        document.addEventListener('mouseleave', () => {
          this.targetMouseX = 0;
          this.targetMouseY = 0;
        });

        window.addEventListener('resize', () => {
          const w = window.innerWidth, h = window.innerHeight;
          this.camera.aspect = w / h;
          this.camera.updateProjectionMatrix();
          this.renderer.setSize(w, h);
          this.composer.setSize(w, h);
        });
      }
    }

    // Initialize
    new SpaceRenderer(document.getElementById('space-container'));

    // ========================================================================
    // BLACK HOLE SCROLL ANIMATION
    // ========================================================================
    const blackHole = document.getElementById('blackHole');
    let bhScrollY = 0, bhTargetY = 0;

    function updateBlackHole() {
      bhScrollY += (bhTargetY - bhScrollY) * 0.08;
      const maxScroll = Math.max(1, document.body.scrollHeight - window.innerHeight);
      const progress = bhScrollY / maxScroll;

      const bottom = -40 + progress * 70;
      const scale = 1 + progress * 0.12;
      blackHole.style.bottom = `${bottom}vh`;
      blackHole.style.transform = `translateX(-50%) scale(${scale})`;

      requestAnimationFrame(updateBlackHole);
    }
    window.addEventListener('scroll', () => { bhTargetY = window.scrollY; }, { passive: true });
    updateBlackHole();

    // ========================================================================
    // REVEAL ANIMATIONS
    // ========================================================================
    const revealObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

    // ========================================================================
    // PHI VALUES
    // ========================================================================
    const burnRateStr = (BURN_RATE * 100).toFixed(1) + '%';
    const treasuryRateStr = (TREASURY_RATE * 100).toFixed(1) + '%';
    const ecosystemBonusStr = '+' + (ECOSYSTEM_BONUS * 100).toFixed(1) + '%';

    document.getElementById('burnRateCenter').textContent = burnRateStr;
    document.getElementById('burnSplit').textContent = burnRateStr;
    document.getElementById('treasurySplit').textContent = treasuryRateStr;
    document.getElementById('ecosystemBonus').textContent = ecosystemBonusStr;

    // ========================================================================
    // K-SCORE TIER INTERACTION
    // ========================================================================
    const kscoreCursor = document.getElementById('kscoreCursor');
    document.querySelectorAll('.kscore-tier').forEach(tier => {
      tier.addEventListener('mouseenter', () => {
        const pos = tier.dataset.pos;
        kscoreCursor.style.left = pos + '%';
      });
    });

    // ========================================================================
    // PROGRESS NAVIGATION
    // ========================================================================
    const sections = ['hero', 'try', 'ecosystem', 'flywheel', 'kscore', 'escore', 'cta'];
    const progressDots = document.querySelectorAll('.progress-dot');
    const progressLabel = document.querySelector('.progress-label');

    const labels = {
      hero: 'overview',
      try: 'try it',
      ecosystem: 'ecosystem',
      flywheel: 'flywheel',
      kscore: 'k-score',
      escore: 'e-score',
      cta: 'start'
    };

    function updateProgress() {
      const scrollPos = window.scrollY + window.innerHeight / 2;
      let active = 'hero';
      for (const s of sections) {
        const el = document.getElementById(s);
        if (el && el.offsetTop <= scrollPos) active = s;
      }
      progressDots.forEach(dot => {
        const section = dot.dataset.section;
        const idx = sections.indexOf(section);
        const activeIdx = sections.indexOf(active);
        dot.classList.toggle('active', idx <= activeIdx);
      });
      if (progressLabel) progressLabel.textContent = labels[active] || 'gm';
    }
    window.addEventListener('scroll', updateProgress, { passive: true });
    updateProgress();

    // Click navigation for dots
    progressDots.forEach(dot => {
      dot.addEventListener('click', () => {
        const section = document.getElementById(dot.dataset.section);
        if (section) section.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // ========================================================================
    // 5 MINI APPS - Tab Switching
    // ========================================================================
    const appTabs = document.querySelectorAll('.app-tab');
    const appPanels = document.querySelectorAll('.app-panel');

    appTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const app = tab.dataset.app;

        // Update tabs
        appTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        // Update panels
        appPanels.forEach(p => p.classList.remove('active'));
        document.getElementById('panel-' + app).classList.add('active');

        // Initialize Jupiter when swap tab is clicked
        if (app === 'swap') {
          initJupiterTerminal();
        }
      });
    });

    // ========================================================================
    // JUPITER PLUGIN INTEGRATION (RPC-less swap widget)
    // ========================================================================
    let jupiterInitialized = false;

    // Get current wallet provider
    function getWalletProvider() {
      if (connectedWallet === 'phantom') {
        return window.phantom?.solana || window.solana;
      } else if (connectedWallet === 'solflare') {
        return window.solflare;
      }
      return null;
    }

    // Build wallet context state for Jupiter Plugin
    function buildWalletContextState() {
      const provider = getWalletProvider();
      if (!provider || !connectedAddress) {
        return {
          wallet: null,
          publicKey: null,
          connected: false,
          connecting: false,
          disconnecting: false,
          signTransaction: undefined,
          signAllTransactions: undefined,
          sendTransaction: undefined,
        };
      }

      // Create adapter with required signing functions
      const adapter = {
        publicKey: provider.publicKey,
        connected: true,
        signTransaction: (tx) => provider.signTransaction(tx),
        signAllTransactions: (txs) => provider.signAllTransactions(txs),
        sendTransaction: provider.sendTransaction ? (tx, conn, opts) => provider.sendTransaction(tx, opts) : undefined,
      };

      return {
        wallet: { adapter },
        publicKey: provider.publicKey,
        connected: true,
        connecting: false,
        disconnecting: false,
        signTransaction: adapter.signTransaction,
        signAllTransactions: adapter.signAllTransactions,
        sendTransaction: adapter.sendTransaction,
      };
    }

    // Sync wallet state with Jupiter Plugin
    function syncJupiterWallet() {
      if (!window.Jupiter?.syncProps) return;
      const state = buildWalletContextState();
      window.Jupiter.syncProps({ passthroughWalletContextState: state });
      console.log('[Jupiter] Wallet synced:', state.connected ? 'connected' : 'disconnected');
    }

    function initJupiterPlugin() {
      if (jupiterInitialized || !window.Jupiter) return;

      try {
        // Jupiter Plugin config (RPC-less - Jupiter handles everything)
        const config = {
          displayMode: 'integrated',
          integratedTargetId: 'jupiter-terminal',
          // Always enable passthrough - we sync state dynamically
          enableWalletPassthrough: true,
          // Callback when Jupiter needs wallet connection
          onRequestConnectWallet: () => {
            console.log('[Jupiter] Wallet connection requested');
            if (walletModal) walletModal.style.display = 'flex';
          },
          formProps: {
            swapMode: 'ExactIn',
            initialAmount: '1000000', // 1 USDC (6 decimals)
            initialInputMint: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v', // USDC
            initialOutputMint: 'So11111111111111111111111111111111111111112', // SOL
          },
          // Event handlers
          onSuccess: ({ txid }) => {
            console.log('[Jupiter] Swap success:', txid);
          },
          onSwapError: ({ error }) => {
            console.error('[Jupiter] Swap error:', error);
          },
        };

        // Pass initial wallet state if connected
        const walletState = buildWalletContextState();
        if (walletState.connected) {
          config.passthroughWalletContextState = walletState;
        }

        window.Jupiter.init(config);
        jupiterInitialized = true;
        console.log('[Jupiter] Plugin initialized', walletState.connected ? 'with wallet' : 'without wallet');
      } catch (e) {
        console.error('[Jupiter] Plugin init error:', e);
      }
    }

    // Alias for backwards compatibility
    const initJupiterTerminal = initJupiterPlugin;

    // Also init if swap tab is already active on load
    if (document.querySelector('.app-tab[data-app="swap"].active')) {
      setTimeout(initJupiterPlugin, 1000);
    }

    // ========================================================================
    // LOAD LIVE DATA FROM APIs
    // ========================================================================
    async function loadStats() {
      try {
        // GASdf Stats
        const statsRes = await fetch('/v1/stats');
        if (statsRes.ok) {
          const data = await statsRes.json();
          if (data.totalBurnedUsd !== undefined) {
            document.getElementById('statBurned').textContent = '$' + data.totalBurnedUsd.toLocaleString();
          }
          if (data.totalTransactions !== undefined) {
            document.getElementById('statTx').textContent = data.totalTransactions.toLocaleString();
          }
        }

        // GASdf Health for uptime
        const healthRes = await fetch('/v1/health');
        if (healthRes.ok) {
          const health = await healthRes.json();
          if (health.uptime !== undefined) {
            const hours = Math.floor(health.uptime / 3600);
            const days = Math.floor(hours / 24);
            const uptimeStr = days > 0 ? days + 'd' : hours + 'h';
            document.getElementById('statUptime').textContent = uptimeStr;
          }
        }
      } catch (e) {
        console.error('Stats load error:', e);
      }
    }

    // Load HolDex tokens for dropdowns
    async function loadTokens() {
      try {
        const res = await fetch('https://asdev-backend.onrender.com/api/tokens?limit=20&verified=true');
        if (!res.ok) return;
        const data = await res.json();

        if (data.tokens && data.tokens.length > 0) {
          const selects = document.querySelectorAll('.form-select');
          selects.forEach(select => {
            // Keep first option
            const firstOpt = select.options[0];
            select.innerHTML = '';
            select.appendChild(firstOpt);

            // Add tokens
            data.tokens.forEach(token => {
              const opt = document.createElement('option');
              opt.value = token.mint;
              opt.textContent = token.ticker + ' (K:' + token.kScore + ')';
              select.appendChild(opt);
            });
          });
        }
      } catch (e) {
        console.error('Tokens load error:', e);
      }
    }

    loadStats();
    loadTokens();
    setInterval(loadStats, 30000);

    // ========================================================================
    // MOBILE: BURN STATS MODAL (Black hole tap)
    // ========================================================================
    const burnModal = document.getElementById('burnModal');
    const burnModalClose = document.getElementById('burnModalClose');
    const isMobileDevice = window.innerWidth < 768 || /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

    // Make black hole tappable on mobile
    if (isMobileDevice && blackHole) {
      blackHole.style.pointerEvents = 'auto';
      blackHole.style.cursor = 'pointer';

      blackHole.addEventListener('click', async (e) => {
        e.stopPropagation();
        burnModal.classList.add('active');
        document.body.style.overflow = 'hidden';

        // Load live burn stats into modal
        await loadBurnModalStats();
      });
    }

    // Close burn modal
    if (burnModalClose) {
      burnModalClose.addEventListener('click', () => {
        burnModal.classList.remove('active');
        document.body.style.overflow = '';
      });
    }

    // Close on backdrop tap
    if (burnModal) {
      burnModal.addEventListener('click', (e) => {
        if (e.target === burnModal) {
          burnModal.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    }

    // Load burn stats into modal
    async function loadBurnModalStats() {
      try {
        const res = await fetch('/v1/stats');
        if (!res.ok) return;
        const data = await res.json();

        // Update modal stat values (IDs match burn-modal HTML)
        // API returns: totalBurned, burnedFormatted, totalTransactions, treasury
        const modalStats = {
          'modalBurnTotal': data.burnedFormatted || (data.totalBurned ? data.totalBurned.toLocaleString() + ' $asdfasdfa' : '---'),
          'modalBurnRate': (BURN_RATE * 100).toFixed(1) + '%',
          'modalTreasuryRate': (TREASURY_RATE * 100).toFixed(1) + '%',
          'modalBurn24h': data.totalTransactions ? data.totalTransactions.toLocaleString() + ' txs' : '---',
          'modalSupplyBurned': data.treasury?.burnRatio ? (data.treasury.burnRatio * 100).toFixed(1) + '% rate' : '76.4% rate'
        };

        Object.entries(modalStats).forEach(([id, value]) => {
          const el = document.getElementById(id);
          if (el) el.textContent = value;
        });
      } catch (e) {
        console.error('Burn modal stats error:', e);
      }
    }

    // ========================================================================
    // WALLET CONNECTION (Phantom / Solflare)
    // ========================================================================
    const navWalletBtn = document.getElementById('navWalletBtn');
    const navWalletText = document.getElementById('navWalletText');
    const walletModal = document.getElementById('walletModal');
    const walletModalClose = document.getElementById('walletModalClose');
    const walletModalTitle = document.getElementById('walletModalTitle');
    const walletOptions = document.getElementById('walletOptions');
    const walletConnected = document.getElementById('walletConnected');
    const phantomBtn = document.getElementById('phantomBtn');
    const solflareBtn = document.getElementById('solflareBtn');
    const phantomStatus = document.getElementById('phantomStatus');
    const solflareStatus = document.getElementById('solflareStatus');
    const disconnectBtn = document.getElementById('disconnectBtn');

    // Wallet state
    let connectedWallet = null;
    let connectedAddress = null;

    // Detect installed wallets
    function detectWallets() {
      const hasPhantom = window.phantom?.solana?.isPhantom || window.solana?.isPhantom;
      const hasSolflare = window.solflare?.isSolflare;

      if (phantomStatus) {
        if (hasPhantom) {
          phantomStatus.textContent = 'Detected â€¢ Click to connect';
          phantomStatus.classList.add('detected');
          phantomBtn.classList.remove('not-installed');
        } else {
          phantomStatus.textContent = 'Not installed';
          phantomStatus.classList.remove('detected');
          phantomBtn.classList.add('not-installed');
        }
      }

      if (solflareStatus) {
        if (hasSolflare) {
          solflareStatus.textContent = 'Detected â€¢ Click to connect';
          solflareStatus.classList.add('detected');
          solflareBtn.classList.remove('not-installed');
        } else {
          solflareStatus.textContent = 'Not installed';
          solflareStatus.classList.remove('detected');
          solflareBtn.classList.add('not-installed');
        }
      }

      return { hasPhantom, hasSolflare };
    }

    // Connect to Phantom
    async function connectPhantom() {
      try {
        const provider = window.phantom?.solana || window.solana;
        if (!provider?.isPhantom) {
          window.open('https://phantom.app/', '_blank');
          return;
        }

        phantomStatus.textContent = 'Connecting...';
        const resp = await provider.connect();
        connectedWallet = 'phantom';
        connectedAddress = resp.publicKey.toString();
        await onWalletConnected();
      } catch (err) {
        console.error('Phantom connect error:', err);
        phantomStatus.textContent = err.message || 'Connection failed';
      }
    }

    // Connect to Solflare
    async function connectSolflare() {
      try {
        const provider = window.solflare;
        if (!provider?.isSolflare) {
          window.open('https://solflare.com/', '_blank');
          return;
        }

        solflareStatus.textContent = 'Connecting...';
        await provider.connect();
        connectedWallet = 'solflare';
        connectedAddress = provider.publicKey.toString();
        await onWalletConnected();
      } catch (err) {
        console.error('Solflare connect error:', err);
        solflareStatus.textContent = err.message || 'Connection failed';
      }
    }

    // After wallet connected - fetch user stats
    async function onWalletConnected() {
      // Update modal UI
      if (walletModalTitle) walletModalTitle.textContent = 'Wallet Connected';
      if (walletOptions) walletOptions.style.display = 'none';
      if (walletConnected) walletConnected.style.display = 'block';

      // Show truncated address
      const addr = connectedAddress;
      const shortAddr = addr.slice(0, 4) + '...' + addr.slice(-4);
      const walletAddrEl = document.getElementById('walletAddress');
      if (walletAddrEl) walletAddrEl.textContent = shortAddr;

      // Update nav button to show connected state
      if (navWalletBtn) {
        navWalletBtn.classList.add('connected');
        navWalletBtn.innerHTML = `<span class="wallet-addr">${shortAddr}</span>`;
      }

      // Fetch real ON-CHAIN wallet stats (on-chain is truth)
      try {
        const res = await fetch('/v1/stats/wallet/' + connectedAddress);
        if (res.ok) {
          const data = await res.json();
          const balanceEl = document.getElementById('userAsdfBalance');
          const tierEl = document.getElementById('userHolderTier');
          const discountEl = document.getElementById('userDiscount');

          // ON-CHAIN DATA (source of truth)
          if (balanceEl) {
            const balance = data.onChain?.asdfBalance ?? data.asdfBalance ?? 0;
            balanceEl.textContent = balance.toLocaleString('en-US', { maximumFractionDigits: 2 });
          }
          if (tierEl) {
            const tier = data.tier || {};
            tierEl.textContent = (tier.emoji || 'ðŸ¥‰') + ' ' + (tier.name || 'BRONZE');
          }
          if (discountEl) {
            const discount = data.tier?.discountPercent ?? data.discountPercent ?? 0;
            discountEl.textContent = discount > 0 ? '-' + discount + '%' : '0%';
          }

          console.log('[WALLET] On-chain data:', {
            balance: data.onChain?.asdfBalance,
            tier: data.tier?.name,
            discount: data.tier?.discountPercent,
            sharePercent: data.onChain?.sharePercent
          });
        }
      } catch (e) {
        console.error('[WALLET] Failed to fetch on-chain stats:', e);
      }

      // Save to localStorage
      localStorage.setItem('connectedWallet', connectedWallet);
      localStorage.setItem('connectedAddress', connectedAddress);

      // Sync wallet state with Jupiter Plugin
      syncJupiterWallet();
    }

    // Disconnect wallet
    function disconnectWallet() {
      try {
        if (connectedWallet === 'phantom') {
          const provider = window.phantom?.solana || window.solana;
          provider?.disconnect();
        } else if (connectedWallet === 'solflare') {
          window.solflare?.disconnect();
        }
      } catch (e) {}

      connectedWallet = null;
      connectedAddress = null;
      localStorage.removeItem('connectedWallet');
      localStorage.removeItem('connectedAddress');

      // Reset modal UI
      if (walletModalTitle) walletModalTitle.textContent = 'Connect Wallet';
      if (walletOptions) walletOptions.style.display = 'flex';
      if (walletConnected) walletConnected.style.display = 'none';

      // Reset nav button
      if (navWalletBtn) {
        navWalletBtn.classList.remove('connected');
        navWalletBtn.innerHTML = `<span class="wallet-icon">ðŸ‘›</span><span>Connect</span>`;
      }

      detectWallets();

      if (walletModal) walletModal.classList.remove('active');
      document.body.style.overflow = '';

      // Sync wallet state with Jupiter Plugin
      syncJupiterWallet();
    }

    // Auto-reconnect on page load
    async function autoReconnect() {
      const savedWallet = localStorage.getItem('connectedWallet');
      const savedAddress = localStorage.getItem('connectedAddress');

      if (savedWallet && savedAddress) {
        try {
          if (savedWallet === 'phantom') {
            const provider = window.phantom?.solana || window.solana;
            if (provider?.isPhantom && provider.isConnected) {
              connectedWallet = 'phantom';
              connectedAddress = provider.publicKey?.toString() || savedAddress;
              await onWalletConnected();
            }
          } else if (savedWallet === 'solflare') {
            const provider = window.solflare;
            if (provider?.isSolflare && provider.isConnected) {
              connectedWallet = 'solflare';
              connectedAddress = provider.publicKey?.toString() || savedAddress;
              await onWalletConnected();
            }
          }
        } catch (e) {
          localStorage.removeItem('connectedWallet');
          localStorage.removeItem('connectedAddress');
        }
      }
    }

    // Event listeners
    if (navWalletBtn) {
      navWalletBtn.addEventListener('click', (e) => {
        e.preventDefault();
        detectWallets();
        if (walletModal) walletModal.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    }

    if (phantomBtn) {
      phantomBtn.addEventListener('click', connectPhantom);
    }

    if (solflareBtn) {
      solflareBtn.addEventListener('click', connectSolflare);
    }

    if (disconnectBtn) {
      disconnectBtn.addEventListener('click', disconnectWallet);
    }

    if (walletModalClose) {
      walletModalClose.addEventListener('click', () => {
        if (walletModal) walletModal.classList.remove('active');
        document.body.style.overflow = '';
      });
    }

    if (walletModal) {
      walletModal.addEventListener('click', (e) => {
        if (e.target === walletModal) {
          walletModal.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    }

    // Initialize
    detectWallets();
    setTimeout(autoReconnect, 500); // Wait for wallet extensions to inject

    // ========================================================================
    // KEYBOARD: ESC closes modals
    // ========================================================================
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (burnModal && burnModal.classList.contains('active')) {
          burnModal.classList.remove('active');
          document.body.style.overflow = '';
        }
        if (walletModal && walletModal.classList.contains('active')) {
          walletModal.classList.remove('active');
          document.body.style.overflow = '';
        }
      }
    });
  </script>
</body>
</html>
